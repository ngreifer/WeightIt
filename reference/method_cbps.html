<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Covariate Balancing Propensity Score Weighting — method_cbps • WeightIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Covariate Balancing Propensity Score Weighting — method_cbps"><meta name="description" content='This page explains the details of estimating weights from covariate balancing
propensity scores by setting method = "cbps" in the call to weightit() or
weightitMSM(). This method can be used with binary, multi-category, and
continuous treatments.
In general, this method relies on estimating propensity scores using
generalized method of moments and then converting those propensity scores
into weights using a formula that depends on the desired estimand. This
method relies on code written for WeightIt using optim().
Binary Treatments


For binary treatments, this method estimates the propensity scores and
weights using optim() using formulas described by Imai and Ratkovic (2014).
The following estimands are allowed: ATE, ATT, ATC, and ATO.



Multi-Category Treatments


For multi-category treatments, this method estimates the generalized
propensity scores and weights using optim() using formulas described by
Imai and Ratkovic (2014). The following estimands are allowed: ATE and ATT.



Continuous Treatments


For continuous treatments, this method estimates the generalized propensity
scores and weights using optim() using a modification of the formulas
described by Fong, Hazlett, and Imai (2018). See Details.



Longitudinal Treatments


For longitudinal treatments, the weights are computed using methods similar
to those described by Huffman and van Gameren (2018). This involves
specifying moment conditions for the models at each time point as with
single-time point treatments but using the product of the time-specific
weights as the weights that are used in the balance moment conditions. This
yields weights that balance the covariate at each time point. This is not the
same implementation as is implemented in CBPS::CBMSM(), and results should
not be expected to align between the two methods. Any combination of
treatment types is supported.
For the over-identified version (i.e., setting over = TRUE), the empirical
variance is used in the objective function, whereas the expected variance
averaging over the treatment is used with binary and multi-category point
treatments.



Sampling Weights


Sampling weights are supported through s.weights in all scenarios.



Missing Data


In the presence of missing data, the following value(s) for missing are
allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.







M-estimation


M-estimation is supported for the just-identified CBPS (the default, setting
over = FALSE) for binary and multi-category treatments. Otherwise (i.e.,
for continuous or longitudinal treatments or when over = TRUE),
M-estimation is not supported. See glm_weightit() and
vignette("estimating-effects") for details.

'><meta property="og:description" content='This page explains the details of estimating weights from covariate balancing
propensity scores by setting method = "cbps" in the call to weightit() or
weightitMSM(). This method can be used with binary, multi-category, and
continuous treatments.
In general, this method relies on estimating propensity scores using
generalized method of moments and then converting those propensity scores
into weights using a formula that depends on the desired estimand. This
method relies on code written for WeightIt using optim().
Binary Treatments


For binary treatments, this method estimates the propensity scores and
weights using optim() using formulas described by Imai and Ratkovic (2014).
The following estimands are allowed: ATE, ATT, ATC, and ATO.



Multi-Category Treatments


For multi-category treatments, this method estimates the generalized
propensity scores and weights using optim() using formulas described by
Imai and Ratkovic (2014). The following estimands are allowed: ATE and ATT.



Continuous Treatments


For continuous treatments, this method estimates the generalized propensity
scores and weights using optim() using a modification of the formulas
described by Fong, Hazlett, and Imai (2018). See Details.



Longitudinal Treatments


For longitudinal treatments, the weights are computed using methods similar
to those described by Huffman and van Gameren (2018). This involves
specifying moment conditions for the models at each time point as with
single-time point treatments but using the product of the time-specific
weights as the weights that are used in the balance moment conditions. This
yields weights that balance the covariate at each time point. This is not the
same implementation as is implemented in CBPS::CBMSM(), and results should
not be expected to align between the two methods. Any combination of
treatment types is supported.
For the over-identified version (i.e., setting over = TRUE), the empirical
variance is used in the objective function, whereas the expected variance
averaging over the treatment is used with binary and multi-category point
treatments.



Sampling Weights


Sampling weights are supported through s.weights in all scenarios.



Missing Data


In the presence of missing data, the following value(s) for missing are
allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.







M-estimation


M-estimation is supported for the just-identified CBPS (the default, setting
over = FALSE) for binary and multi-category treatments. Otherwise (i.e.,
for continuous or longitudinal treatments or when over = TRUE),
M-estimation is not supported. See glm_weightit() and
vignette("estimating-effects") for details.

'><meta property="og:image" content="https://ngreifer.github.io/WeightIt/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WeightIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/WeightIt.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Weighting</a></li>
    <li><a class="dropdown-item" href="../articles/installing-packages.html">Installing Supporting Packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ngreifer/WeightIt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Covariate Balancing Propensity Score Weighting</h1>
      <small class="dont-index">Source: <a href="https://github.com/ngreifer/WeightIt/blob/master/R/weightit2cbps.R" class="external-link"><code>R/weightit2cbps.R</code></a></small>
      <div class="d-none name"><code>method_cbps.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This page explains the details of estimating weights from covariate balancing
propensity scores by setting <code>method = "cbps"</code> in the call to <code><a href="weightit.html">weightit()</a></code> or
<code><a href="weightitMSM.html">weightitMSM()</a></code>. This method can be used with binary, multi-category, and
continuous treatments.</p>
<p>In general, this method relies on estimating propensity scores using
generalized method of moments and then converting those propensity scores
into weights using a formula that depends on the desired estimand. This
method relies on code written for <span class="pkg">WeightIt</span> using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>.</p><div class="section">
<h3 id="binary-treatments">Binary Treatments<a class="anchor" aria-label="anchor" href="#binary-treatments"></a></h3>


<p>For binary treatments, this method estimates the propensity scores and
weights using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> using formulas described by Imai and Ratkovic (2014).
The following estimands are allowed: ATE, ATT, ATC, and ATO.</p>
</div>

<div class="section">
<h3 id="multi-category-treatments">Multi-Category Treatments<a class="anchor" aria-label="anchor" href="#multi-category-treatments"></a></h3>


<p>For multi-category treatments, this method estimates the generalized
propensity scores and weights using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> using formulas described by
Imai and Ratkovic (2014). The following estimands are allowed: ATE and ATT.</p>
</div>

<div class="section">
<h3 id="continuous-treatments">Continuous Treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments"></a></h3>


<p>For continuous treatments, this method estimates the generalized propensity
scores and weights using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> using a modification of the formulas
described by Fong, Hazlett, and Imai (2018). See Details.</p>
</div>

<div class="section">
<h3 id="longitudinal-treatments">Longitudinal Treatments<a class="anchor" aria-label="anchor" href="#longitudinal-treatments"></a></h3>


<p>For longitudinal treatments, the weights are computed using methods similar
to those described by Huffman and van Gameren (2018). This involves
specifying moment conditions for the models at each time point as with
single-time point treatments but using the product of the time-specific
weights as the weights that are used in the balance moment conditions. This
yields weights that balance the covariate at each time point. This is not the
same implementation as is implemented in <code><a href="https://rdrr.io/pkg/CBPS/man/CBMSM.html" class="external-link">CBPS::CBMSM()</a></code>, and results should
not be expected to align between the two methods. Any combination of
treatment types is supported.</p>
<p>For the over-identified version (i.e., setting <code>over = TRUE</code>), the empirical
variance is used in the objective function, whereas the expected variance
averaging over the treatment is used with binary and multi-category point
treatments.</p>
</div>

<div class="section">
<h3 id="sampling-weights">Sampling Weights<a class="anchor" aria-label="anchor" href="#sampling-weights"></a></h3>


<p>Sampling weights are supported through <code>s.weights</code> in all scenarios.</p>
</div>

<div class="section">
<h3 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a></h3>


<p>In the presence of missing data, the following value(s) for <code>missing</code> are
allowed:</p><dl><dt><code>"ind"</code> (default)</dt>
<dd><p>First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is <code>NA</code> and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting <code>weightit</code> object will be the original covariates with the <code>NA</code>s.</p></dd>


</dl></div>

<div class="section">
<h3 id="m-estimation">M-estimation<a class="anchor" aria-label="anchor" href="#m-estimation"></a></h3>


<p>M-estimation is supported for the just-identified CBPS (the default, setting
<code>over = FALSE</code>) for binary and multi-category treatments. Otherwise (i.e.,
for continuous or longitudinal treatments or when <code>over = TRUE</code>),
M-estimation is not supported. See <code><a href="glm_weightit.html">glm_weightit()</a></code> and
<code><a href="../articles/estimating-effects.html">vignette("estimating-effects")</a></code> for details.</p>
</div>

    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>CBPS estimates the coefficients of a generalized linear model (for
binary treatments), multinomial logistic regression model (for multi-category
treatments), or linear regression model (for continuous treatments) that is
used to compute (generalized) propensity scores, from which the weights are
computed. It involves replacing (or augmenting, in the case of the
over-identified version) the standard regression score equations with the
balance constraints in a generalized method of moments estimation. The idea
is to nudge the estimation of the coefficients toward those that produce
balance in the weighted sample. The just-identified version (with <code>exact = FALSE</code>) does away with the score equations for the coefficients so that only
the balance constraints are used. The just-identified version will therefore
produce superior balance on the means (i.e., corresponding to the balance
constraints) for binary and multi-category treatments and linear terms for
continuous treatments than will the over-identified version.</p>
<p>Just-identified CBPS is very similar to entropy balancing and inverse
probability tilting. For the ATT, all three methods will yield identical
estimates. For other estimands, the results will differ.</p>
<p>Note that <span class="pkg">WeightIt</span> provides different functionality from the <span class="pkg">CBPS</span>
package in terms of the versions of CBPS available; for extensions to CBPS
(e.g., optimal CBPS and CBPS for instrumental variables), the <span class="pkg">CBPS</span>
package may be preferred. Note that for longitudinal treatments,
<code><a href="https://rdrr.io/pkg/CBPS/man/CBMSM.html" class="external-link">CBPS::CBMSM()</a></code> uses different methods and produces different results from
<code><a href="weightitMSM.html">weightitMSM()</a></code> called with <code>method = "cbps"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This method used to rely on functionality in the <span class="pkg">CBPS</span> package,
but no longer does. Slight differences may be found between the two packages
in some cases due to numerical imprecision (or, for continuous and
longitudinal treatments, due to a difference in the estimator).
<span class="pkg">WeightIt</span> supports arbitrary numbers of groups for the multi-category
CBPS and any estimand, whereas <span class="pkg">CBPS</span> only supports up to four groups and
only the ATE. The implementation of the just-identified CBPS for continuous
treatments also differs from that of <span class="pkg">CBPS</span>, and departs slightly from
that described by Fong et al. (2018). The treatment mean and treatment
variance are treated as random parameters to be estimated and are included in
the balance moment conditions. In Fong et al. (2018), the treatment mean and
variance are fixed to their empirical counterparts. For continuous treatments
with the over-identified CBPS, <span class="pkg">WeightIt</span> and <span class="pkg">CBPS</span> use different
methods of specifying the GMM variance matrix, which may lead to differing
results.</p>
<p>Note that the default method differs between the two implementations; by
default <span class="pkg">WeightIt</span> uses the just-identified CBPS, which is faster to fit,
yields better balance, and is compatible with M-estimation for estimating the
standard error of the treatment effect, whereas <span class="pkg">CBPS</span> uses the
over-identified CBPS by default. However, both the just-identified and
over-identified versions are available in both packages.</p>
<p>When the <span class="pkg">rootSolve</span> package is installed, the optimization process will
be slightly faster and more accurate because starting values are provided by
an initial call to rootSolvemultiroot. However, the package is not
required.</p>
    </div>
    <div class="section level2">
    <h2 id="additional-arguments">Additional Arguments<a class="anchor" aria-label="anchor" href="#additional-arguments"></a></h2>
    <p><code>moments</code> and <code>int</code> are accepted. See
<code><a href="weightit.html">weightit()</a></code> for details.</p>
<p>The following additional arguments can be specified:</p><dl><dt><code>over</code></dt>
<dd><p><code>logical</code>; whether to request the over-identified CBPS, which combines the generalized linear model regression score equations (for binary treatments), multinomial logistic regression score equations (for multi-category treatments), or linear regression score equations (for continuous treatments) to the balance moment conditions. Default is <code>FALSE</code> to use the just-identified CBPS.</p></dd>

<dt><code>twostep</code></dt>
<dd><p><code>logical</code>; when <code>over = TRUE</code>, whether to use the two-step approximation to the generalized method of moments variance. Default is <code>TRUE</code>. Setting to <code>FALSE</code> increases computation time but may improve estimation. Ignored with a warning when <code>over = FALSE</code>.</p></dd>

<dt><code>link</code></dt>
<dd><p>the link used in the generalized linear model for the propensity scores when treatment is binary. Default is <code>"logit"</code> for logistic regression, which is used in the original description of the method by Imai and Ratkovic (2014), but others are allowed, including <code>"probit"</code>, <code>"cauchit"</code>, <code>"cloglog"</code>, <code>"loglog"</code>, <code>"log"</code>, <code>"clog"</code>, and <code>"identity"</code>. Note that negative weights are possible with these last three and they should be used with caution. An object of class <code>"link-glm"</code> can also be supplied. The argument is passed to <code><a href="https://rdrr.io/r/stats/family.html" class="external-link">quasibinomial()</a></code>. Ignored for multi-category, continuous, and longitudinal treatments.</p></dd>

<dt><code>reltol</code></dt>
<dd><p>the relative tolerance for convergence of the optimization. Passed to the <code>control</code> argument of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>. Default is <code>1e-10</code>.</p></dd>

<dt><code>maxit</code></dt>
<dd><p>the maximum number of iterations for convergence of the optimization. Passed to the <code>control</code> argument of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>. Default is 1000 for binary and multi-category treatments and 10000 for continuous and longitudinal treatments.</p></dd>

<dt><code>solver</code></dt>
<dd><p>the solver to use to estimate the parameters of the just-identified CBPS. Allowable options include <code>"multiroot"</code> to use rootSolvemultiroot and <code>"optim"</code> to use <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">stats::optim()</a></code>. <code>"multiroot"</code> is the default when <span class="pkg">rootSolve</span> is installed, as it tends to be much faster and more accurate; otherwise, <code>"optim"</code> is the default and requires no dependencies. Regardless of <code>solver</code>, the output of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> is returned when <code>include.obj = TRUE</code> (see below). When <code>over = TRUE</code>, the parameter estimates of the just-identified CBPS are used as starting values for the over-identified CBPS.</p></dd>

<dt><code>quantile</code></dt>
<dd><p>A named list of quantiles (values between 0 and 1) for each continuous covariate, which are used to create additional variables that when balanced ensure balance on the corresponding quantile of the variable. For example, setting <code>quantile = list(x1 = c(.25, .5. , .75))</code> ensures the 25th, 50th, and 75th percentiles of <code>x1</code> in each treatment group will be balanced in the weighted sample. Can also be a single number (e.g., <code>.5</code>) or an unnamed list of length 1 (e.g., <code>list(c(.25, .5, .75))</code>) to request the same quantile(s) for all continuous covariates, or a named vector (e.g., <code>c(x1 = .5, x2 = .75)</code> to request one quantile for each covariate. Only allowed with binary and multi-category treatments.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="additional-outputs">Additional Outputs<a class="anchor" aria-label="anchor" href="#additional-outputs"></a></h2>


<dl><dt><code>obj</code></dt>
<dd><p>When <code>include.obj = TRUE</code>, the output of the final call to <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> used to produce the model parameters. Note that because of variable transformations, the resulting parameter estimates may not be interpretable.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<div class="section">
<h3 id="binary-treatments-1">Binary treatments<a class="anchor" aria-label="anchor" href="#binary-treatments-1"></a></h3>


<p>Imai, K., &amp; Ratkovic, M. (2014). Covariate balancing propensity score.
<em>Journal of the Royal Statistical Society: Series B (Statistical
Methodology)</em>, 76(1), 243–263.</p>
</div>

<div class="section">
<h3 id="multi-category-treatments-1">Multi-Category treatments<a class="anchor" aria-label="anchor" href="#multi-category-treatments-1"></a></h3>


<p>Imai, K., &amp; Ratkovic, M. (2014). Covariate balancing propensity score.
<em>Journal of the Royal Statistical Society: Series B (Statistical
Methodology)</em>, 76(1), 243–263.</p>
</div>

<div class="section">
<h3 id="continuous-treatments-1">Continuous treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments-1"></a></h3>


<p>Fong, C., Hazlett, C., &amp; Imai, K. (2018). Covariate balancing propensity
score for a continuous treatment: Application to the efficacy of political
advertisements. <em>The Annals of Applied Statistics</em>, 12(1), 156–177.
<a href="https://doi.org/10.1214/17-AOAS1101" class="external-link">doi:10.1214/17-AOAS1101</a></p>
</div>

<div class="section">
<h3 id="longitudinal-treatments-1">Longitudinal treatments<a class="anchor" aria-label="anchor" href="#longitudinal-treatments-1"></a></h3>


<p>Huffman, C., &amp; van Gameren, E. (2018). Covariate Balancing Inverse
Probability Weights for Time-Varying Continuous Interventions. <em>Journal of
Causal Inference</em>, 6(2). <a href="https://doi.org/10.1515/jci-2017-0002" class="external-link">doi:10.1515/jci-2017-0002</a></p>
<p>Note: one should not cite Imai &amp; Ratkovic (2015) when using CBPS for
longitudinal treatments.</p>
<p>Some of the code was inspired by the source code of the <span class="pkg">CBPS</span> package.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="weightit.html">weightit()</a></code>, <code><a href="weightitMSM.html">weightitMSM()</a></code></p>
<p><a href="method_ebal.html">method_ebal</a> and <a href="method_ipt.html">method_ipt</a> for entropy balancing and inverse probability
tilting, which work similarly.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W1a</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"cbps"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "cbps" (covariate balancing propensity score weighting)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W1a</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.0000              ||               1.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 0.0172 |---------------------------| 2.2625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               5      4      3      2      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated      1      1      1      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             589    595    269    409    296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 1.4644 1.4848 1.5763 1.7434 2.2625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.000 0.000   0.000       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.839 0.707   0.341       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    252.12     185</span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W1a</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prop.score Distance   0.0164</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age         Contin.  -0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ        Contin.   0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      Binary  -0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     Binary   0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74        Contin.  -0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    252.12     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="co">#using over-identified CBPS with probit link</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W1b</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"cbps"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span>,</span></span>
<span class="r-in"><span>                over <span class="op">=</span> <span class="cn">TRUE</span>, link <span class="op">=</span> <span class="st">"probit"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "cbps" (covariate balancing propensity score weighting)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W1b</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.0000               ||              1.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 0.0125 |---------------------------| 2.0531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               5     4      3      2      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated      1     1      1      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             595   589    269    409    296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 1.3681 1.378 1.4721 1.6067 2.0531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated        0.00 0.000   0.000       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control        0.81 0.693   0.326       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    259.24     185</span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W1b</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prop.score Distance   0.0334</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age         Contin.  -0.0021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ        Contin.   0.0028</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      Binary   0.0011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     Binary   0.0041</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74        Contin.  -0.0284</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    259.24     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates with respect to race (multi-category)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W2</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">race</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"cbps"</span>, estimand <span class="op">=</span> <span class="st">"ATE"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "cbps" (covariate balancing propensity score weighting)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 3-category (black, hispan, white)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black  1.5007  |------------------|         17.9659</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan 1.6315  |--------------------------| 24.5609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white  1.1311 |--|                           4.1340</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            226     231     485     181     182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   black 6.7985  6.8385  7.2674  9.8974 17.9659</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            392     564     269     345     371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  hispan 16.762 19.8529 22.0193 23.8782 24.5609</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            398     432     437     404     599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   white 3.6882  3.7815  3.8476  3.8952   4.134</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black        0.635 0.387   0.133       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan       0.582 0.447   0.155       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white        0.389 0.327   0.071       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 243.    72.   299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   173.37  53.95 259.76</span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance summary across all treatment pairs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Max.Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 243.    72.   299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   173.37  53.95 259.76</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates with respect to re75 (continuous)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W3</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">re75</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"cbps"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "cbps" (covariate balancing propensity score weighting)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: continuous</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all 0.0151 |---------------------------| 43.9963</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          482     180     481     483     185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  all 10.8239 11.0878 11.9703 13.1314 43.9963</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all       1.942 0.528   0.454       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   128.86</span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Corr.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.   0.1773</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.   0.1071</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary   0.4522</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary   0.3308</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.   0.5514</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   128.86</span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">#Longitudinal treatments</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"msmdata"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W4</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightitMSM.html">weightitMSM</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">A_1</span> <span class="op">~</span> <span class="va">X1_0</span> <span class="op">+</span> <span class="va">X2_0</span>,</span></span>
<span class="r-in"><span>                        <span class="va">A_2</span> <span class="op">~</span> <span class="va">X1_1</span> <span class="op">+</span> <span class="va">X2_1</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                          <span class="va">A_1</span> <span class="op">+</span> <span class="va">X1_0</span> <span class="op">+</span> <span class="va">X2_0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   data <span class="op">=</span> <span class="va">msmdata</span>,</span></span>
<span class="r-in"><span>                   method <span class="op">=</span> <span class="st">"cbps"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightitMSM</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "cbps" (covariate balancing propensity score weighting)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 7500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of time points: 2 (A_1, A_2)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 1: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 2: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + baseline: X1_0, X2_0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + after time 1: X1_1, X2_1, A_1, X1_0, X2_0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                       </span><span style="font-style: italic;"> Time 1 </span><span style="text-decoration: line-through;">                       </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.0503 |---------------------------| 110.8804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 1.2386 |---------------------|        86.9515</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             3880     168    2859    3774     3653</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated 50.1139 50.1139 56.0786 96.4501 110.8804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             5695    6284    3500    1875     1362</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control  52.431 55.2118 55.2118 58.5934  86.9515</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       1.107 0.552   0.291       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       1.033 0.600   0.315       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 3306.   4194.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   1598.88 1884.92</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                       </span><span style="font-style: italic;"> Time 2 </span><span style="text-decoration: line-through;">                       </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                    Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.0503 |-----------------------|      96.4501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 1.2386 |---------------------------| 110.8804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             3729     871    3880     168     3774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated 42.3872 42.8221 50.1139 50.1139  96.4501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             3500    2859    1875    1362     3653</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 55.2118 56.0786 58.5934 86.9515 110.8804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.986 0.588   0.292       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       1.165 0.583   0.329       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 3701.      3799</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   1570.46    1926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance summary across all time points</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Times    Type Max.Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X1_0  1, 2 Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X2_0  1, 2  Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X1_1     2 Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X2_1     2  Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A_1      2  Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - <span style="font-style: italic;">Time 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 3306.   4194.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   1598.88 1884.92</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - <span style="font-style: italic;">Time 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 3701.      3799</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   1570.46    1926</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

