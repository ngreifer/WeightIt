<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Entropy Balancing — method_ebal • WeightIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Entropy Balancing — method_ebal"><meta name="description" content='This page explains the details of estimating weights using
entropy balancing by setting method = "ebal" in the call to weightit() or
weightitMSM(). This method can be used with binary, multi-category, and
continuous treatments.
In general, this method relies on estimating weights by minimizing the
negative entropy of the weights subject to exact moment balancing
constraints. This method relies on code written for WeightIt using
optim().
Binary Treatments


For binary treatments, this method estimates the weights using optim()
using formulas described by Hainmueller (2012). The following estimands are
allowed: ATE, ATT, and ATC. When the ATE is requested, the optimization is
run twice, once for each treatment group.



Multi-Category Treatments


For multi-category treatments, this method estimates the weights using
optim(). The following estimands are allowed: ATE and ATT. When the ATE is
requested, optim() is run once for each treatment group. When the ATT is
requested, optim() is run once for each non-focal (i.e., control) group.



Continuous Treatments


For continuous treatments, this method estimates the weights using optim()
using formulas described by Tübbicke (2022) and Vegetabile et al. (2021).



Longitudinal Treatments


For longitudinal treatments, the weights are the product of the weights
estimated at each time point. This method is not guaranteed to yield exact
balance at each time point. NOTE: the use of entropy balancing with
longitudinal treatments has not been validated and should not be done!



Sampling Weights


Sampling weights are supported through s.weights in all scenarios.



Missing Data


In the presence of missing data, the following value(s) for missing are
allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.







M-estimation


M-estimation is supported for all scenarios. See glm_weightit() and
vignette("estimating-effects") for details.

'><meta property="og:description" content='This page explains the details of estimating weights using
entropy balancing by setting method = "ebal" in the call to weightit() or
weightitMSM(). This method can be used with binary, multi-category, and
continuous treatments.
In general, this method relies on estimating weights by minimizing the
negative entropy of the weights subject to exact moment balancing
constraints. This method relies on code written for WeightIt using
optim().
Binary Treatments


For binary treatments, this method estimates the weights using optim()
using formulas described by Hainmueller (2012). The following estimands are
allowed: ATE, ATT, and ATC. When the ATE is requested, the optimization is
run twice, once for each treatment group.



Multi-Category Treatments


For multi-category treatments, this method estimates the weights using
optim(). The following estimands are allowed: ATE and ATT. When the ATE is
requested, optim() is run once for each treatment group. When the ATT is
requested, optim() is run once for each non-focal (i.e., control) group.



Continuous Treatments


For continuous treatments, this method estimates the weights using optim()
using formulas described by Tübbicke (2022) and Vegetabile et al. (2021).



Longitudinal Treatments


For longitudinal treatments, the weights are the product of the weights
estimated at each time point. This method is not guaranteed to yield exact
balance at each time point. NOTE: the use of entropy balancing with
longitudinal treatments has not been validated and should not be done!



Sampling Weights


Sampling weights are supported through s.weights in all scenarios.



Missing Data


In the presence of missing data, the following value(s) for missing are
allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.







M-estimation


M-estimation is supported for all scenarios. See glm_weightit() and
vignette("estimating-effects") for details.

'><meta property="og:image" content="https://ngreifer.github.io/WeightIt/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WeightIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/WeightIt.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Weighting</a></li>
    <li><a class="dropdown-item" href="../articles/installing-packages.html">Installing Supporting Packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ngreifer/WeightIt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Entropy Balancing</h1>
      <small class="dont-index">Source: <a href="https://github.com/ngreifer/WeightIt/blob/master/R/weightit2ebal.R" class="external-link"><code>R/weightit2ebal.R</code></a></small>
      <div class="d-none name"><code>method_ebal.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This page explains the details of estimating weights using
entropy balancing by setting <code>method = "ebal"</code> in the call to <code><a href="weightit.html">weightit()</a></code> or
<code><a href="weightitMSM.html">weightitMSM()</a></code>. This method can be used with binary, multi-category, and
continuous treatments.</p>
<p>In general, this method relies on estimating weights by minimizing the
negative entropy of the weights subject to exact moment balancing
constraints. This method relies on code written for <span class="pkg">WeightIt</span> using
<code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>.</p><div class="section">
<h3 id="binary-treatments">Binary Treatments<a class="anchor" aria-label="anchor" href="#binary-treatments"></a></h3>


<p>For binary treatments, this method estimates the weights using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>
using formulas described by Hainmueller (2012). The following estimands are
allowed: ATE, ATT, and ATC. When the ATE is requested, the optimization is
run twice, once for each treatment group.</p>
</div>

<div class="section">
<h3 id="multi-category-treatments">Multi-Category Treatments<a class="anchor" aria-label="anchor" href="#multi-category-treatments"></a></h3>


<p>For multi-category treatments, this method estimates the weights using
<code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>. The following estimands are allowed: ATE and ATT. When the ATE is
requested, <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> is run once for each treatment group. When the ATT is
requested, <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> is run once for each non-focal (i.e., control) group.</p>
</div>

<div class="section">
<h3 id="continuous-treatments">Continuous Treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments"></a></h3>


<p>For continuous treatments, this method estimates the weights using <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>
using formulas described by Tübbicke (2022) and Vegetabile et al. (2021).</p>
</div>

<div class="section">
<h3 id="longitudinal-treatments">Longitudinal Treatments<a class="anchor" aria-label="anchor" href="#longitudinal-treatments"></a></h3>


<p>For longitudinal treatments, the weights are the product of the weights
estimated at each time point. This method is not guaranteed to yield exact
balance at each time point. <strong>NOTE: the use of entropy balancing with
longitudinal treatments has not been validated and should not be done!</strong></p>
</div>

<div class="section">
<h3 id="sampling-weights">Sampling Weights<a class="anchor" aria-label="anchor" href="#sampling-weights"></a></h3>


<p>Sampling weights are supported through <code>s.weights</code> in all scenarios.</p>
</div>

<div class="section">
<h3 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a></h3>


<p>In the presence of missing data, the following value(s) for <code>missing</code> are
allowed:</p><dl><dt><code>"ind"</code> (default)</dt>
<dd><p>First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is <code>NA</code> and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting <code>weightit</code> object will be the original covariates with the <code>NA</code>s.</p></dd>


</dl></div>

<div class="section">
<h3 id="m-estimation">M-estimation<a class="anchor" aria-label="anchor" href="#m-estimation"></a></h3>


<p>M-estimation is supported for all scenarios. See <code><a href="glm_weightit.html">glm_weightit()</a></code> and
<code><a href="../articles/estimating-effects.html">vignette("estimating-effects")</a></code> for details.</p>
</div>

    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Entropy balancing involves the specification of an optimization
problem, the solution to which is then used to compute the weights. The
constraints of the primal optimization problem correspond to covariate
balance on the means (for binary and multi-category treatments) or
treatment-covariate covariances (for continuous treatments), positivity of
the weights, and that the weights sum to a certain value. It turns out that
the dual optimization problem is much easier to solve because it is over only
as many variables as there are balance constraints rather than over the
weights for each unit, and it is unconstrained.</p>
<p>Zhao and Percival (2017) found
that entropy balancing for the ATT of a binary treatment actually involves
the estimation of the coefficients of a logistic regression propensity score
model but using a specialized loss function different from that optimized
with maximum likelihood. Entropy balancing is doubly robust (for the ATT) in
the sense that it is consistent either when the true propensity score model
is a logistic regression of the treatment on the covariates or when the true
outcome model for the control units is a linear regression of the outcome on
the covariates, and it attains a semi-parametric efficiency bound when both
are true. Entropy balancing will always yield exact mean balance on the
included terms.</p>
    </div>
    <div class="section level2">
    <h2 id="additional-arguments">Additional Arguments<a class="anchor" aria-label="anchor" href="#additional-arguments"></a></h2>



<dl><dt><code>base.weights</code></dt>
<dd><p>a vector of base weights, one for each unit. These correspond to the base weights $q$ in Hainmueller (2012). The estimated weights minimize the Kullback entropy divergence from the base weights, defined as \(\sum w \log(w/q)\), subject to exact balance constraints. These can be used to supply previously estimated weights so that the newly estimated weights retain the some of the properties of the original weights while ensuring the balance constraints are met. Sampling weights should not be passed to <code>base.weights</code> but can be included in a <code><a href="weightit.html">weightit()</a></code> call that includes <code>s.weights</code>.</p></dd>

<dt><code>reltol</code></dt>
<dd><p>the relative tolerance for convergence of the optimization. Passed to the <code>control</code> argument of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>. Default is <code>1e-10</code>.</p></dd>

<dt><code>maxit</code></dt>
<dd><p>the maximum number of iterations for convergence of the optimization. Passed to the <code>control</code> argument of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>. Default is 1000 for binary and multi-category treatments and 10000 for continuous and longitudinal treatments.</p></dd>

<dt><code>solver</code></dt>
<dd><p>the solver to use to estimate the parameters. Allowable options include <code>"multiroot"</code> to use <code><a href="https://rdrr.io/pkg/rootSolve/man/multiroot.html" class="external-link">rootSolve::multiroot()</a></code> and <code>"optim"</code> to use <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">stats::optim()</a></code>. <code>"multiroot"</code> is the default when <span class="pkg">rootSolve</span> is installed, as it tends to be much faster and more accurate; otherwise, <code>"optim"</code> is the default and requires no dependencies. Regardless of <code>solver</code>, the output of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> is returned when <code>include.obj = TRUE</code> (see below).</p></dd>

<dt><code>moments</code></dt>
<dd><p><code>integer</code>; the highest power of each covariate to be balanced. For example, if <code>moments = 3</code>, each covariate, its square, and its cube will be balanced. Can also be a named vector with a value for each covariate (e.g., <code>moments = c(x1 = 2, x2 = 4)</code>). Values greater than 1 for categorical covariates are ignored. Default is 1 to balance covariate means.</p></dd>

<dt><code>int</code></dt>
<dd><p><code>logical</code>; whether first-order interactions of the covariates are to be balanced. Default is <code>FALSE</code>.</p></dd>

<dt><code>quantile</code></dt>
<dd><p>a named list of quantiles (values between 0 and 1) for each continuous covariate, which are used to create additional variables that when balanced ensure balance on the corresponding quantile of the variable. For example, setting <code>quantile = list(x1 = c(.25, .5. , .75))</code> ensures the 25th, 50th, and 75th percentiles of <code>x1</code> in each treatment group will be balanced in the weighted sample. Can also be a single number (e.g., <code>.5</code>) or a vector (e.g., <code>c(.25, .5, .75)</code>) to request the same quantile(s) for all continuous covariates. Only allowed with binary and multi-category treatments.</p></dd>

<dt><code>d.moments</code></dt>
<dd><p><code>integer</code>; with continuous treatments, the number of moments of the treatment and covariate distributions that are constrained to be the same in the weighted sample as in the original sample. For example, setting <code>d.moments = 3</code> ensures that the mean, variance, and skew of the treatment and covariates are the same in the weighted sample as in the unweighted sample. <code>d.moments</code> should be greater than or equal to <code>moments</code> and will be automatically set accordingly if not (or if not specified). Vegetabile et al. (2021) recommend setting <code>d.moments = 3</code>, even if <code>moments</code> is less than 3. This argument corresponds to the tuning parameters \(r\) and \(s\) in Vegetabile et al. (2021) (which here are set to be equal). Ignored for binary and multi-category treatments.</p></dd>


</dl><p>The <code>stabilize</code> argument is ignored; in the past it would reduce the
variability of the weights through an iterative process. If you want to
minimize the variance of the weights subject to balance constraints, use
<code>method = "optweight"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="additional-outputs">Additional Outputs<a class="anchor" aria-label="anchor" href="#additional-outputs"></a></h2>


<dl><dt><code>obj</code></dt>
<dd><p>When <code>include.obj = TRUE</code>, the output of the call to <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code>, which contains the dual variables and convergence information. For ATE fits or with multi-category treatments, a list of <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">optim()</a></code> outputs, one for each weighted group.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<div class="section">
<h3 id="binary-treatments-1">Binary Treatments<a class="anchor" aria-label="anchor" href="#binary-treatments-1"></a></h3>

<div class="section">
<h4 id="estimand-att-"><code>estimand = "ATT"</code><a class="anchor" aria-label="anchor" href="#estimand-att-"></a></h4>


<p>Hainmueller, J. (2012). Entropy Balancing for Causal
Effects: A Multivariate Reweighting Method to Produce Balanced Samples in
Observational Studies. <em>Political Analysis</em>, 20(1), 25–46.
<a href="https://doi.org/10.1093/pan/mpr025" class="external-link">doi:10.1093/pan/mpr025</a></p>
<p>Zhao, Q., &amp; Percival, D. (2017). Entropy balancing is doubly robust. <em>Journal of Causal Inference</em>, 5(1). <a href="https://doi.org/10.1515/jci-2016-0010" class="external-link">doi:10.1515/jci-2016-0010</a></p>
</div>

<div class="section">
<h4 id="estimand-ate-"><code>estimand = "ATE"</code><a class="anchor" aria-label="anchor" href="#estimand-ate-"></a></h4>


<p>Källberg, D., &amp; Waernbaum, I. (2023). Large Sample Properties of Entropy
Balancing Estimators of Average Causal Effects. <em>Econometrics and Statistics</em>. <a href="https://doi.org/10.1016/j.ecosta.2023.11.004" class="external-link">doi:10.1016/j.ecosta.2023.11.004</a></p>
</div>


</div>

<div class="section">
<h3 id="continuous-treatments-1">Continuous Treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments-1"></a></h3>


<p>Tübbicke, S. (2022). Entropy Balancing for Continuous Treatments. <em>Journal of Econometric Methods</em>, 11(1), 71–89. <a href="https://doi.org/10.1515/jem-2021-0002" class="external-link">doi:10.1515/jem-2021-0002</a></p>
<p>Vegetabile, B. G., Griffin, B. A., Coffman, D. L., Cefalu, M., Robbins, M.
W., &amp; McCaffrey, D. F. (2021). Nonparametric estimation of population average
dose-response curves using entropy balancing weights for continuous
exposures. <em>Health Services and Outcomes Research Methodology</em>, 21(1),
69–110. <a href="https://doi.org/10.1007/s10742-020-00236-2" class="external-link">doi:10.1007/s10742-020-00236-2</a></p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="weightit.html">weightit()</a></code>, <code><a href="weightitMSM.html">weightitMSM()</a></code></p>
<p><a href="method_ipt.html">method_ipt</a> and <a href="method_cbps.html">method_cbps</a> for inverse probability tilting and CBPS,
which work similarly.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W1</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"ebal"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "ebal" (entropy balancing)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.         ||                      1.   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 0.04 |---------------------------| 5.247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              1     2     3     4     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated     1     1     1     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            410   404   224   111    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 3.396 3.443 3.655 4.043 5.247</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.000 0.000   0.000       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.839 0.707   0.341       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    252.12     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    252.12     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates with respect to race (multi-category)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W2</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">race</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"ebal"</span>, estimand <span class="op">=</span> <span class="st">"ATE"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "ebal" (entropy balancing)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 3-category (black, hispan, white)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black  0.553   |-------------------------| 5.35 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan 0.141 |----------------|            3.332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white  0.398  |-------|                    1.923</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           203   166   163   153   152</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   black 2.521 2.549 2.806 3.555  5.35</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            67    43    39    36    28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  hispan 2.046  2.53 2.632 2.705 3.332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           291   285   258   205     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   white 1.711 1.723 1.743 1.774 1.923</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black        0.590 0.413   0.131       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan       0.609 0.440   0.163       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white        0.371 0.306   0.068       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 243.    72.   299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   180.47  52.71 262.93</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance summary across all treatment pairs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Max.Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 243.    72.   299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   180.47  52.71 262.93</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates and squares with respect to</span></span></span>
<span class="r-in"><span><span class="co">#re75 (continuous), maintaining 3 moments of the</span></span></span>
<span class="r-in"><span><span class="co">#covariate and treatment distributions</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W3</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">re75</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"ebal"</span>, moments <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                d.moments <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "ebal" (entropy balancing)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: continuous</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all   0 |---------------------------| 17.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        484   200   180    171   166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  all 6.745 7.616 8.523 10.266 17.65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all       1.252 0.614   0.423       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   239.32</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W3</span>, poly <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="st">"m"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Corr.Adj Diff.Target.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.  -0.0000              -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.  -0.0001              -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary  -0.0001               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary   0.0005               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.  -0.0001               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age²     Contin.  -0.0000              -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ²    Contin.  -0.0001              -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74²    Contin.  -0.0000               0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   239.32</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

