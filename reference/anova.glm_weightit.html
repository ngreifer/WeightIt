<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Methods for glm_weightit() objects — anova.glm_weightit • WeightIt</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Methods for glm_weightit() objects — anova.glm_weightit"><meta name="description" content="anova() is used to compare nested models fit with glm_weightit(), mutinom_weightit(), ordinal_weightit(), or coxph_weightit() using a Wald test that incorporates uncertainty in estimating the weights (if any)."><meta property="og:description" content="anova() is used to compare nested models fit with glm_weightit(), mutinom_weightit(), ordinal_weightit(), or coxph_weightit() using a Wald test that incorporates uncertainty in estimating the weights (if any)."><meta property="og:image" content="https://ngreifer.github.io/WeightIt/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WeightIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.2.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/WeightIt.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Weighting</a></li>
    <li><a class="dropdown-item" href="../articles/installing-packages.html">Installing Supporting Packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ngreifer/WeightIt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Methods for <code>glm_weightit()</code> objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/ngreifer/WeightIt/blob/master/R/anova.glm_weightit.R" class="external-link"><code>R/anova.glm_weightit.R</code></a></small>
      <div class="d-none name"><code>anova.glm_weightit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova()</a></code> is used to compare nested models fit with <code><a href="glm_weightit.html">glm_weightit()</a></code>, <code>mutinom_weightit()</code>, <code><a href="glm_weightit.html">ordinal_weightit()</a></code>, or <code><a href="glm_weightit.html">coxph_weightit()</a></code> using a Wald test that incorporates uncertainty in estimating the weights (if any).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'glm_weightit'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">object2</span>,</span>
<span>  test <span class="op">=</span> <span class="st">"Chisq"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"Wald"</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="fl">1e-07</span>,</span>
<span>  vcov <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object-object-">object, object2<a class="anchor" aria-label="anchor" href="#arg-object-object-"></a></dt>
<dd><p>an output from one of the above modeling functions. <code>object2</code> is required.</p></dd>


<dt id="arg-test">test<a class="anchor" aria-label="anchor" href="#arg-test"></a></dt>
<dd><p>the type of test statistic used to compare models. Currently only <code>"Chisq"</code> (the chi-square statistic) is allowed.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>the kind of test used to compare models. Currently only <code>"Wald"</code> is allowed.</p></dd>


<dt id="arg-tolerance">tolerance<a class="anchor" aria-label="anchor" href="#arg-tolerance"></a></dt>
<dd><p>for the Wald test, the tolerance used to determine if models are symbolically nested.</p></dd>


<dt id="arg-vcov">vcov<a class="anchor" aria-label="anchor" href="#arg-vcov"></a></dt>
<dd><p>either a string indicating the method used to compute the variance of the estimated parameters for <code>object</code>, a function used to extract the variance, or the variance matrix itself. Default is to use the variance matrix already present in <code>object</code>. If a string or function, arguments passed to <code>...</code> are supplied to the method or function. (Note: for <code><a href="https://rdrr.io/r/stats/vcov.html" class="external-link">vcov()</a></code>, can also be supplied as <code>type</code>.)</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>other arguments passed to the function used for computing the parameter variance matrix, if supplied as a string or function, e.g., <code>cluster</code>, <code>R</code>, or <code>fwb.args</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>"anova"</code> inheriting from class <code>"data.frame"</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova()</a></code> performs a Wald test to compare two fitted models. The models must be nested, but they don't have to be nested symbolically (i.e., the names of the coefficients of the smaller model do not have to be a subset of the names of the coefficients of the larger model). The larger model must be supplied to <code>object</code> and the smaller to <code>object2</code>. Both models must contain the same units, weights (if any), and outcomes. The variance-covariance matrix of the coefficients of the smaller model is not used.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="glm_weightit.html">glm_weightit()</a></code> for the page documenting <code><a href="glm_weightit.html">glm_weightit()</a></code>, <code><a href="glm_weightit.html">lm_weightit()</a></code>, <code><a href="glm_weightit.html">ordinal_weightit()</a></code>, <code><a href="glm_weightit.html">multinom_weightit()</a></code>, and <code><a href="glm_weightit.html">coxph_weightit()</a></code>. <code><a href="https://rdrr.io/r/stats/anova.glm.html" class="external-link">anova.glm()</a></code> for model comparison of <code>glm</code> objects.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model comparison for any relationship between `treat`</span></span></span>
<span class="r-in"><span><span class="co"># and `re78` (not the same as testing for the ATE)</span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="glm_weightit.html">glm_weightit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">re78</span> <span class="op">~</span> <span class="va">treat</span> <span class="op">*</span> <span class="op">(</span><span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">nodegree</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                    <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">lalonde</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="glm_weightit.html">glm_weightit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">re78</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span> <span class="va">nodegree</span> <span class="op">+</span></span></span>
<span class="r-in"><span>    <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>, data <span class="op">=</span> <span class="va">lalonde</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">fit1</span>, <span class="va">fit2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Wald test</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Variance: HC0 robust</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 1: re78 ~ treat * (age + educ + race + married + nodegree + re74 + re75)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 2: re78 ~ age + educ + race + married + nodegree + re74 + re75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Res.Df Df  Chisq Pr(&gt;Chisq)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    596                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    605  9 17.563    0.04059 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using the usual maximum likelihood variance matrix</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">fit1</span>, <span class="va">fit2</span>, vcov <span class="op">=</span> <span class="st">"const"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Wald test</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Variance: maximum likelihood</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 1: re78 ~ treat * (age + educ + race + married + nodegree + re74 + re75)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 2: re78 ~ age + educ + race + married + nodegree + re74 + re75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Res.Df Df  Chisq Pr(&gt;Chisq)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    596                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    605  9 19.761    0.01944 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using a bootstrapped variance matrix</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">fit1</span>, <span class="va">fit2</span>, vcov <span class="op">=</span> <span class="st">"BS"</span>, R <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Wald test</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Variance: traditional bootstrap</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 1: re78 ~ treat * (age + educ + race + married + nodegree + re74 + re75)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 2: re78 ~ age + educ + race + married + nodegree + re74 + re75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Res.Df Df  Chisq Pr(&gt;Chisq)  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    596                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    605  9 18.043    0.03468 *</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Model comparison between spline model and linear</span></span></span>
<span class="r-in"><span><span class="co"># model; note they are nested but not symbolically</span></span></span>
<span class="r-in"><span><span class="co"># nested</span></span></span>
<span class="r-in"><span><span class="va">fit_s</span> <span class="op">&lt;-</span> <span class="fu"><a href="glm_weightit.html">glm_weightit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">re78</span> <span class="op">~</span> <span class="fu">splines</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/splines/ns.html" class="external-link">ns</a></span><span class="op">(</span><span class="va">age</span>, df <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">lalonde</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="glm_weightit.html">glm_weightit</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">re78</span> <span class="op">~</span> <span class="va">age</span>, data <span class="op">=</span> <span class="va">lalonde</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/stats/anova.html" class="external-link">anova</a></span><span class="op">(</span><span class="va">fit_s</span>, <span class="va">fit_l</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Wald test</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="font-style: italic;">Variance: HC0 robust</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 1: re78 ~ splines::ns(age, df = 4)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 2: re78 ~ age</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Res.Df Df  Chisq Pr(&gt;Chisq)   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    609                        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    612  3 14.166   0.002688 **</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

