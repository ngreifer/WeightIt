<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Optimization-Based Weighting — method_optweight • WeightIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Optimization-Based Weighting — method_optweight"><meta property="og:description" content='This page explains the details of estimating optimization-based weights 9also known as stable balancing weights) by setting method = "optweight" in the call to weightit() or weightitMSM(). This method can be used with binary, multinomial, and continuous treatments.
In general, this method relies on estimating weights by solving a quadratic programming problem subject to approximate or exact balance constraints. This method relies on optweight::optweight() from the optweight package.
Because optweight() offers finer control and uses the same syntax as weightit(), it is recommended that optweight::optweight() be used instead of weightit with method = "optweight".

Binary Treatments
For binary treatments, this method estimates the weights using optweight::optweight(). The following estimands are allowed: ATE, ATT, and ATC. The weights are taken from the output of the optweight fit object.


Multinomial Treatments
For multinomial treatments, this method estimates the weights using optweight::optweight(). The following estimands are allowed: ATE and ATT. The weights are taken from the output of the optweight fit object.


Continuous Treatments
For binary treatments, this method estimates the weights using optweight::optweight(). The weights are taken from the output of the optweight fit object.


Longitudinal Treatments
For longitudinal treatments, optweight() estimates weights that simultaneously satisfy balance constraints at all time points, so only one model is fit to obtain the weights. Using method = "optweight" in weightitMSM() causes is.MSM.method to be set to TRUE by default. Setting it to FALSE will run one model for each time point and multiply the weights together, a method that is not recommended. NOTE: neither use of optimization-based weights with longitudinal treatments has been validated!


Sampling Weights
Sampling weights are supported through s.weights in all scenarios.


Missing Data
In the presence of missing data, the following value(s) for missing are allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with 0s (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.





'><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">WeightIt</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.13.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/WeightIt.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/installing-packages.html">Installing Supporting Packages</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ngreifer/WeightIt/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Optimization-Based Weighting</h1>
    
    <div class="hidden name"><code>method_optweight.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This page explains the details of estimating optimization-based weights 9also known as stable balancing weights) by setting <code>method = "optweight"</code> in the call to <code><a href="weightit.html">weightit()</a></code> or <code><a href="weightitMSM.html">weightitMSM()</a></code>. This method can be used with binary, multinomial, and continuous treatments.</p>
<p>In general, this method relies on estimating weights by solving a quadratic programming problem subject to approximate or exact balance constraints. This method relies on <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code> from the <a href="https://CRAN.R-project.org/package=optweight" class="external-link"><span class="pkg">optweight</span></a> package.</p>
<p>Because <code>optweight()</code> offers finer control and uses the same syntax as <code><a href="weightit.html">weightit()</a></code>, it is recommended that <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code> be used instead of <code>weightit</code> with <code>method = "optweight"</code>.</p>
<div class="section">
<h3 id="binary-treatments">Binary Treatments<a class="anchor" aria-label="anchor" href="#binary-treatments"></a></h3>
<p>For binary treatments, this method estimates the weights using <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code>. The following estimands are allowed: ATE, ATT, and ATC. The weights are taken from the output of the <code>optweight</code> fit object.</p>
</div>
<div class="section">
<h3 id="multinomial-treatments">Multinomial Treatments<a class="anchor" aria-label="anchor" href="#multinomial-treatments"></a></h3>
<p>For multinomial treatments, this method estimates the weights using <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code>. The following estimands are allowed: ATE and ATT. The weights are taken from the output of the <code>optweight</code> fit object.</p>
</div>
<div class="section">
<h3 id="continuous-treatments">Continuous Treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments"></a></h3>
<p>For binary treatments, this method estimates the weights using <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code>. The weights are taken from the output of the <code>optweight</code> fit object.</p>
</div>
<div class="section">
<h3 id="longitudinal-treatments">Longitudinal Treatments<a class="anchor" aria-label="anchor" href="#longitudinal-treatments"></a></h3>
<p>For longitudinal treatments, <code>optweight()</code> estimates weights that simultaneously satisfy balance constraints at all time points, so only one model is fit to obtain the weights. Using <code>method = "optweight"</code> in <code><a href="weightitMSM.html">weightitMSM()</a></code> causes <code>is.MSM.method</code> to be set to <code>TRUE</code> by default. Setting it to <code>FALSE</code> will run one model for each time point and multiply the weights together, a method that is not recommended. NOTE: neither use of optimization-based weights with longitudinal treatments has been validated!</p>
</div>
<div class="section">
<h3 id="sampling-weights">Sampling Weights<a class="anchor" aria-label="anchor" href="#sampling-weights"></a></h3>
<p>Sampling weights are supported through <code>s.weights</code> in all scenarios.</p>
</div>
<div class="section">
<h3 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a></h3>
<p>In the presence of missing data, the following value(s) for <code>missing</code> are allowed:</p><dl><dt><code>"ind"</code> (default)</dt>
<dd><p>First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is <code>NA</code> and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with 0s (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting <code>weightit</code> object will be the original covariates with the <code>NA</code>s.</p></dd>


</dl></div>

    </div>


    <div id="additional-arguments">
    <h2>Additional Arguments</h2>
    <p>All arguments to <code>optweight()</code> can be passed through <code><a href="weightit.html">weightit()</a></code> or <code><a href="weightitMSM.html">weightitMSM()</a></code>, with the following exception:</p>
<p><code>targets</code> cannot be used and is ignored.</p>
<p>All arguments take on the defaults of those in <code>optweight()</code>.</p>
    </div>
    <div id="additional-outputs">
    <h2>Additional Outputs</h2>
    
<dl><dt><code>info</code></dt>
<dd><p>A list with one entry:</p><dl><dt><code>duals</code></dt>
<dd><p>A data frame of dual variables for each balance constraint.</p></dd>



</dl></dd>

<dt><code>obj</code></dt>
<dd><p>When <code>include.obj = TRUE</code>, the output of the call to <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code>.</p></dd>


</dl></div>
    <div id="note">
    <h2>Note</h2>
    <p>The specification of <code>tols</code> differs between <code><a href="weightit.html">weightit()</a></code> and <code>optweight()</code>. In <code><a href="weightit.html">weightit()</a></code>, one tolerance value should be included per level of each factor variable, whereas in <code>optweight()</code>, all levels of a factor are given the same tolerance, and only one value needs to be supplied for a factor variable. Because of the potential for confusion and ambiguity, it is recommended to only supply one value for <code>tols</code> in <code><a href="weightit.html">weightit()</a></code> that applies to all variables. For finer control, use <code>optweight()</code> directly.</p>
<p>Seriously, just use <code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code>. The syntax is almost identical and it's compatible with <span class="pkg">cobalt</span>, too.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Stable balancing weights are weights that solve a constrained optimization problem, where the constraints correspond to covariate balance and the loss function is the variance (or other norm) of the weights. These weights maximize the effective sample size of the weighted sample subject to user-supplied balance constraints. An advantage of this method over entropy balancing is the ability to allow approximate, rather than exact, balance through the <code>tols</code> argument, which can increase precision even for slight relaxations of the constraints.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    

<p><strong>Binary Treatments</strong></p>
<p>Wang, Y., &amp; Zubizarreta, J. R. (2020). Minimal dispersion approximately balancing weights: Asymptotic properties and practical considerations. Biometrika, 107(1), 93–105. <a href="https://doi.org/10.1093/biomet/asz050" class="external-link">doi:10.1093/biomet/asz050</a></p>
<p>Zubizarreta, J. R. (2015). Stable Weights that Balance Covariates for Estimation With Incomplete Outcome Data. Journal of the American Statistical Association, 110(511), 910–922. <a href="https://doi.org/10.1080/01621459.2015.1023805" class="external-link">doi:10.1080/01621459.2015.1023805</a></p>
<p><strong>Multinomial Treatments</strong></p>
<p>de los Angeles Resa, M., &amp; Zubizarreta, J. R. (2020). Direct and stable weight adjustment in non-experimental studies with multivalued treatments: Analysis of the effect of an earthquake on post-traumatic stress. Journal of the Royal Statistical Society: Series A (Statistics in Society), n/a(n/a). <a href="https://doi.org/10.1111/rssa.12561" class="external-link">doi:10.1111/rssa.12561</a></p>
<p><strong>Continuous Treatments</strong></p>
<p>Greifer, N. (2020). Estimating Balancing Weights for Continuous Treatments Using Constrained Optimization. <a href="https://doi.org/10.17615/DYSS-B342" class="external-link">doi:10.17615/DYSS-B342</a></p>


    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="weightit.html">weightit()</a></code>, <code><a href="weightitMSM.html">weightitMSM()</a></code></p>
<p><code><a href="https://rdrr.io/pkg/optweight/man/optweight.html" class="external-link">optweight::optweight()</a></code> for the fitting function</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ngreifer.github.io/cobalt/" class="external-link">"cobalt"</a></span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Balancing covariates between treatment groups (binary)</span></span>
<span class="r-in"><span class="op">(</span><span class="va">W1</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span>
<span class="r-in">                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span>
<span class="r-in">                method <span class="op">=</span> <span class="st">"optweight"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span>,</span>
<span class="r-in">                tols <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "optweight" (targeted stable balancing weights)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Min                                  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated   1           ||                  1.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control   0 |---------------------------| 3.0426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               5      4      3      2      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated      1      1      1      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             411    589    269    409    296</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 2.5261 2.5415 2.6434 2.7396 3.0426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.000 0.000   0.000       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.788 0.697   0.393      83</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    264.88     185</span>
<span class="r-in"><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  weightit(formula = treat ~ age + educ + married + nodegree + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     re74, data = lalonde, method = "optweight", estimand = "ATT", </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     tols = 0)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary        0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.       -0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    264.88     185</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Balancing covariates with respect to race (multinomial)</span></span>
<span class="r-in"><span class="op">(</span><span class="va">W2</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">race</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span>
<span class="r-in">                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span>
<span class="r-in">                method <span class="op">=</span> <span class="st">"optweight"</span>, estimand <span class="op">=</span> <span class="st">"ATE"</span>,</span>
<span class="r-in">                tols <span class="op">=</span> <span class="fl">.01</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "optweight" (targeted stable balancing weights)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 3-category (black, hispan, white)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Min                                  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black  0.4429     |-----------------------| 3.5741</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan 0.0000 |-------------------|         2.5848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white  0.2574   |---------|                 1.6593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            184    190    485    181    182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   black 2.3351 2.3723 2.5586 2.8367 3.5741</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            392    345    269    564    371</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  hispan 2.0459 2.0984 2.1887 2.1982 2.5848</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             68    589    324    599    531</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   white 1.5706 1.5706 1.5725 1.5968 1.6593</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black        0.550 0.443   0.130       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan       0.566 0.449   0.176       2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white        0.353 0.295   0.065       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 243.     72.  299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   186.76   54.7 266.01</span>
<span class="r-in"><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  weightit(formula = race ~ age + educ + married + nodegree + re74, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data = lalonde, method = "optweight", estimand = "ATE", tols = 0.01)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance summary across all treatment pairs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Max.Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.         0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.         0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary         0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary         0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.         0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 243.     72.  299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   186.76   54.7 266.01</span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#Balancing covariates with respect to re75 (continuous)</span></span>
<span class="r-in"><span class="op">(</span><span class="va">W3</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">re75</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span>
<span class="r-in">                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span>
<span class="r-in">                method <span class="op">=</span> <span class="st">"optweight"</span>, tols <span class="op">=</span> <span class="fl">.05</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "optweight" (targeted stable balancing weights)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: continuous</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all   0 |---------------------------| 3.966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         482    483   200    178   180</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  all 2.9566 3.0117 3.048 3.5934 3.966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all       0.574 0.445   0.173      34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   462.02</span>
<span class="r-in"><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  weightit(formula = re75 ~ age + educ + married + nodegree + re74, </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     data = lalonde, method = "optweight", tols = 0.05)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Corr.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.  -0.0087</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.  -0.0106</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary   0.0499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary  -0.0451</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.   0.0499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   462.02</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

