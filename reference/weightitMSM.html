<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="weightitMSM() allows for the easy generation of balancing weights for marginal structural models for time-varying treatments using a variety of available methods for binary, continuous, and multinomial treatments. Many of these methods exist in other packages, which weightit() calls; these packages must be installed to use the desired method. Also included are print() and summary() methods for examining the output.
Currently only &quot;wide&quot; data sets, where each row corresponds to a unit's entire variable history, are supported. You can use reshape() or other functions to transform your data into this format; see example below."><title>Generate Balancing Weights for Longitudinal Treatments — weightitMSM • WeightIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Balancing Weights for Longitudinal Treatments — weightitMSM"><meta property="og:description" content="weightitMSM() allows for the easy generation of balancing weights for marginal structural models for time-varying treatments using a variety of available methods for binary, continuous, and multinomial treatments. Many of these methods exist in other packages, which weightit() calls; these packages must be installed to use the desired method. Also included are print() and summary() methods for examining the output.
Currently only &quot;wide&quot; data sets, where each row corresponds to a unit's entire variable history, are supported. You can use reshape() or other functions to transform your data into this format; see example below."><meta property="og:image" content="https://ngreifer.github.io/WeightIt/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">WeightIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.13.1.9004</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/WeightIt.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/installing-packages.html">Installing Supporting Packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ngreifer/WeightIt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Balancing Weights for Longitudinal Treatments</h1>
      
      <div class="d-none name"><code>weightitMSM.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>weightitMSM()</code> allows for the easy generation of balancing weights for marginal structural models for time-varying treatments using a variety of available methods for binary, continuous, and multinomial treatments. Many of these methods exist in other packages, which <code><a href="weightit.html">weightit()</a></code> calls; these packages must be installed to use the desired method. Also included are <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> methods for examining the output.</p>
<p>Currently only "wide" data sets, where each row corresponds to a unit's entire variable history, are supported. You can use <code><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape()</a></code> or other functions to transform your data into this format; see example below.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weightitMSM</span><span class="op">(</span><span class="va">formula.list</span>,</span>
<span>            data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            method <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>            stabilize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            s.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            num.formula <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            moments <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            int <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            missing <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>            verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            include.obj <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            <span class="va">is.MSM.method</span>,</span>
<span>            weightit.force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>            <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for weightitMSM</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>formula.list</dt>
<dd><p>a list of formulas corresponding to each time point with the time-specific treatment variable on the left hand side and pre-treatment covariates to be balanced on the right hand side. The formulas must be in temporal order, and must contain all covariates to be balanced at that time point (i.e., treatments and covariates featured in early formulas should appear in later ones). Interactions and functions of covariates are allowed.</p></dd>

  <dt>data</dt>
<dd><p>an optional data set in the form of a data frame that contains the variables in the formulas in <code>formula.list</code>. This must be a wide data set with exactly one row per unit.</p></dd>

  <dt>method</dt>
<dd><p>a string of length 1 containing the name of the method that will be used to estimate weights. See <code><a href="weightit.html">weightit()</a></code> for allowable options. The default is <code>"glm"</code>, which estimates the weights using generalized linear models.</p></dd>

  <dt>stabilize</dt>
<dd><p><code>logical</code>; whether or not to stabilize the weights. Stabilizing the weights involves fitting a model predicting treatment at each time point from treatment status at prior time points. If <code>TRUE</code>, a fully saturated model will be fit (i.e., all interactions between all treatments up to each time point), essentially using the observed treatment probabilities in the numerator (for binary and multinomial treatments). This may yield an error if some combinations are not observed. Default is <code>FALSE</code>. To manually specify stabilization model formulas, e.g., to specify non-saturated models, use <code>num.formula</code>. With many time points, saturated models may be time-consuming or impossible to fit.</p></dd>

<dt>num.formula</dt>
<dd><p>optional; a one-sided formula with the stabilization factors (other than the previous treatments) on the right hand side, which adds, for each time point, the stabilization factors to a model saturated with previous treatments. See Cole &amp; Hernán (2008) for a discussion of how to specify this model; including stabilization factors can change the estimand without proper adjustment, and should be done with caution. Can also be a list of one-sided formulas, one for each time point. Unless you know what you are doing, we recommend setting <code>stabilize = TRUE</code> and ignoring <code>num.formula</code>.</p></dd>

  <dt>by</dt>
<dd><p>a string containing the name of the variable in <code>data</code> for which weighting is to be done within categories or a one-sided formula with the stratifying variable on the right-hand side. For example, if <code>by = "gender"</code> or <code>by = ~ gender</code>, weights will be generated separately within each level of the variable <code>"gender"</code>. The argument used to be called <code>exact</code>, which will still work but with a message. Only one <code>by</code> variable is allowed.</p></dd>

  <dt>s.weights</dt>
<dd><p>a vector of sampling weights or the name of a variable in <code>data</code> that contains sampling weights. These are ignored for some methods.</p></dd>

  <dt>moments</dt>
<dd><p><code>numeric</code>; for some methods, the greatest power of each covariate to be balanced. For example, if <code>moments = 3</code>, for each non-categorical covariate, the covariate, its square, and its cube will be balanced. This argument is ignored for other methods; to balance powers of the covariates, appropriate functions must be entered in <code>formula</code>. See the specific methods help pages for information on whether they accept <code>moments</code>.</p></dd>

  <dt>int</dt>
<dd><p><code>logical</code>; for some methods, whether first-order interactions of the covariates are to be balanced. This argument is ignored for other methods; to balance interactions between the variables, appropriate functions must be entered in <code>formula</code>. See the specific methods help pages for information on whether they accept <code>int</code>.</p></dd>

  <dt>missing</dt>
<dd><p><code>character</code>; how missing data should be handled. The options and defaults depend on the <code>method</code> used. Ignored if no missing data is present. It should be noted that multiple imputation outperforms all available missingness methods available in <code><a href="weightit.html">weightit()</a></code> and should probably be used instead. See the <a href="https://CRAN.R-project.org/package=MatchThem" class="external-link"><span class="pkg">MatchThem</span></a> package for the use of <code><a href="weightit.html">weightit()</a></code> with multiply imputed data.</p></dd>

  <dt>verbose</dt>
<dd><p>whether to print additional information output by the fitting function.</p></dd>

  <dt>include.obj</dt>
<dd><p>whether to include in the output a list of the fit objects created in the process of estimating the weights at each time point. For example, with <code>method = "glm"</code>, a list of the <code>glm</code> objects containing the propensity score models at each time point will be included. See the help pages for each method for information on what object will be included if <code>TRUE</code>.</p></dd>

  <dt>is.MSM.method</dt>
<dd><p>whether the method estimates weights for multiple time points all at once (<code>TRUE</code>) or by estimating weights at each time point and then multiplying them together (<code>FALSE</code>). This is only relevant for <code>method = "optweight")</code>, which estimates weights for longitudinal treatments all at once, and for user-specified functions.</p></dd>

  <dt>weightit.force</dt>
<dd><p>several methods are not valid for estimating weights with longitudinal treatments, and will produce an error message if attempted. Set to <code>TRUE</code> to bypass this error message.</p></dd>

  <dt>...</dt>
<dd><p>other arguments for functions called by <code><a href="weightit.html">weightit()</a></code> that control aspects of fitting that are not covered by the above arguments. See Details at <code><a href="weightit.html">weightit()</a></code>.</p></dd>

  <dt>x</dt>
<dd><p>a <code>weightitMSM</code> object; the output of a call to <code>weightitMSM()</code>.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>weightitMSM</code> object with the following elements:</p>
<dl><dt>weights</dt>
<dd><p>The estimated weights, one for each unit.</p></dd>

  <dt>treat.list</dt>
<dd><p>A list of the values of the time-varying treatment variables.</p></dd>

  <dt>covs.list</dt>
<dd><p>A list of the covariates used in the fitting at each time point. Only includes the raw covariates, which may have been altered in the fitting process.</p></dd>

  <dt>data</dt>
<dd><p>The data.frame originally entered to <code>weightitMSM()</code>.</p></dd>

  <dt>estimand</dt>
<dd><p>"ATE", currently the only estimand for MSMs with binary or multinomial treatments.</p></dd>

  <dt>method</dt>
<dd><p>The weight estimation method specified.</p></dd>

  <dt>ps.list</dt>
<dd><p>A list of the estimated propensity scores (if any) at each time point.</p></dd>

  <dt>s.weights</dt>
<dd><p>The provided sampling weights.</p></dd>

  <dt>by</dt>
<dd><p>A data.frame containing the <code>by</code> variable when specified.</p></dd>

  <dt>stabilization</dt>
<dd><p>The stabilization factors, if any.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>In general, <code>weightitMSM()</code> works by separating the estimation of weights into separate procedures for each time period based on the formulas provided. For each formula, <code>weightitMSM()</code> simply calls <code><a href="weightit.html">weightit()</a></code> to that formula, collects the weights for each time period, and multiplies them together to arrive at longitudinal balancing weights.</p>
<p>Each formula should contain all the covariates to be balanced on. For example, the formula corresponding to the second time period should contain all the baseline covariates, the treatment variable at the first time period, and the time-varying covariates that took on values after the first treatment and before the second. Currently, only wide data sets are supported, where each unit is represented by exactly one row that contains the covariate and treatment history encoded in separate variables.</p>
<p>The <code>"cbps"</code> method, which calls <code>CBPS()</code> in <span class="pkg">CBPS</span>, will yield different results from <code>CBMSM()</code> in <span class="pkg">CBPS</span> because <code>CBMSM()</code> takes a different approach to generating weights than simply estimating several time-specific models.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Noah Greifer</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="weightit.html">weightit()</a></code> for information on the allowable methods.</p></div>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Cole, S. R., &amp; Hernán, M. A. (2008). Constructing Inverse Probability Weights for Marginal Structural Models. American Journal of Epidemiology, 168(6), 656–664. <a href="https://doi.org/10.1093/aje/kwn164" class="external-link">doi:10.1093/aje/kwn164</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st">"twang"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ngreifer.github.io/cobalt/" class="external-link">"cobalt"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"iptwExWide"</span>, package <span class="op">=</span> <span class="st">"twang"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W1</span> <span class="op">&lt;-</span> <span class="fu">weightitMSM</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">tx1</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span>,</span></span>
<span class="r-in"><span>                      <span class="va">tx2</span> <span class="op">~</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use1</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span>,</span></span>
<span class="r-in"><span>                      <span class="va">tx3</span> <span class="op">~</span> <span class="va">tx2</span> <span class="op">+</span> <span class="va">use2</span> <span class="op">+</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use1</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 data <span class="op">=</span> <span class="va">iptwExWide</span>,</span></span>
<span class="r-in"><span>                 method <span class="op">=</span> <span class="st">"glm"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightitMSM</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "glm" (propensity score weighting with GLM)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of time points: 3 (tx1, tx2, tx3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 1: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 2: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 3: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + baseline: age, gender, use0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + after time 1: tx1, use1, age, gender, use0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + after time 2: tx2, use2, tx1, use1, age, gender, use0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                      </span><span style="font-style: italic;"> Time 1 </span><span style="text-decoration: line-through;">                      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.6667 |---|                         15.5292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 2.6123 |---------------------------| 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              477     442     307     409     906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated 13.4464 13.6233 13.7059  14.436 15.5292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              206     282     641     547     980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 44.8027 46.1355 58.4164 79.8919 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.481 0.376   0.117       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.768 0.494   0.222       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  294.     706. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    185.18   573.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                      </span><span style="font-style: italic;"> Time 2 </span><span style="text-decoration: line-through;">                      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.6667 |---------------------------| 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 2.6123 |--------------------------|  79.8919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               34     561     553     641     980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated  33.371 34.7405 42.9442 58.4164 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              109      95     206     282     547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 39.7862 42.2256 44.8027 46.1355 79.8919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.960 0.653   0.336       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.737 0.384   0.159       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted   492.   508.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted     318.9  264.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                      </span><span style="font-style: italic;"> Time 3 </span><span style="text-decoration: line-through;">                      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.6667 |-------------|               44.8027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 2.6123 |---------------------------| 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              936     650     763     109     206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated  26.003  26.471 28.0582 39.7862 44.8027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              553     282     641     547     980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 42.9442 46.1355 58.4164 79.8919 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.773 0.565   0.245       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.873 0.469   0.227       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  415.     585. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    235.67   366.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Call</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  weightitMSM(formula.list = list(tx1 ~ age + gender + use0, tx2 ~ </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     tx1 + use1 + age + gender + use0, tx3 ~ tx2 + use2 + tx1 + </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     use1 + age + gender + use0), data = iptwExWide, method = "glm")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance summary across all time points</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              Times     Type Max.Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prop.score 1, 2, 3 Distance       0.0251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age        1, 2, 3  Contin.       0.0703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> gender     1, 2, 3   Binary       0.0263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> use0       1, 2, 3  Contin.       0.0558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tx1           2, 3   Binary       0.0171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> use1          2, 3  Contin.       0.0316</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> tx2              3   Binary       0.0085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> use2             3  Contin.       0.0315</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - <span style="font-style: italic;">Time 1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  294.     706. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    185.18   573.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - <span style="font-style: italic;">Time 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted   492.   508.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted     318.9  264.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - <span style="font-style: italic;">Time 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  415.     585. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    235.67   366.4</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##Going from long to wide data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"iptwExLong"</span>, package <span class="op">=</span> <span class="st">"twang"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wide_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape</a></span><span class="op">(</span><span class="va">iptwExLong</span><span class="op">$</span><span class="va">covariates</span>,    <span class="co">#long data</span></span></span>
<span class="r-in"><span>                     timevar <span class="op">=</span> <span class="st">"time"</span>,         <span class="co">#time variable</span></span></span>
<span class="r-in"><span>                     v.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"use"</span>, <span class="st">"tx"</span><span class="op">)</span>, <span class="co">#time-varying</span></span></span>
<span class="r-in"><span>                     idvar <span class="op">=</span> <span class="st">"ID"</span>,             <span class="co">#time-stable</span></span></span>
<span class="r-in"><span>                     direction <span class="op">=</span> <span class="st">"wide"</span>,</span></span>
<span class="r-in"><span>                     sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W2</span> <span class="op">&lt;-</span> <span class="fu">weightitMSM</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">tx1</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use1</span>,</span></span>
<span class="r-in"><span>                      <span class="va">tx2</span> <span class="op">~</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use2</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use1</span>,</span></span>
<span class="r-in"><span>                      <span class="va">tx3</span> <span class="op">~</span> <span class="va">tx2</span> <span class="op">+</span> <span class="va">use3</span> <span class="op">+</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use2</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                          <span class="va">gender</span> <span class="op">+</span> <span class="va">use1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 data <span class="op">=</span> <span class="va">wide_data</span>,</span></span>
<span class="r-in"><span>                 method <span class="op">=</span> <span class="st">"glm"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightitMSM</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "glm" (propensity score weighting with GLM)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of time points: 3 (tx1, tx2, tx3)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 1: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 2: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + time 3: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + baseline: age, gender, use1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + after time 1: tx1, use2, age, gender, use1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     + after time 2: tx2, use3, tx1, use2, age, gender, use1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                      </span><span style="font-style: italic;"> Time 1 </span><span style="text-decoration: line-through;">                      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.6667 |---|                         15.5292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 2.6123 |---------------------------| 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              477     442     307     409     906</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated 13.4464 13.6233 13.7059  14.436 15.5292</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              206     282     641     547     980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 44.8027 46.1355 58.4164 79.8919 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.481 0.376   0.117       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.768 0.494   0.222       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  294.     706. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    185.18   573.6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                      </span><span style="font-style: italic;"> Time 2 </span><span style="text-decoration: line-through;">                      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.6667 |---------------------------| 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 2.6123 |--------------------------|  79.8919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               34     561     553     641     980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated  33.371 34.7405 42.9442 58.4164 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              109      95     206     282     547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 39.7862 42.2256 44.8027 46.1355 79.8919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.960 0.653   0.336       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.737 0.384   0.159       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted   492.   508.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted     318.9  264.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: line-through;">                      </span><span style="font-style: italic;"> Time 3 </span><span style="text-decoration: line-through;">                      </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Min                                   Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.6667 |-------------|               44.8027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 2.6123 |---------------------------| 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              936     650     763     109     206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated  26.003  26.471 28.0582 39.7862 44.8027</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              553     282     641     547     980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 42.9442 46.1355 58.4164 79.8919 82.2349</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.773 0.565   0.245       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.873 0.469   0.227       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  415.     585. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    235.67   366.4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">W1</span><span class="op">$</span><span class="va">weights</span>, <span class="va">W2</span><span class="op">$</span><span class="va">weights</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Using stabilization factors</span></span></span>
<span class="r-in"><span><span class="va">W3</span> <span class="op">&lt;-</span> <span class="fu">weightitMSM</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">tx1</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span>,</span></span>
<span class="r-in"><span>                       <span class="va">tx2</span> <span class="op">~</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use1</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span>,</span></span>
<span class="r-in"><span>                       <span class="va">tx3</span> <span class="op">~</span> <span class="va">tx2</span> <span class="op">+</span> <span class="va">use2</span> <span class="op">+</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use1</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="va">iptwExWide</span>,</span></span>
<span class="r-in"><span>                  method <span class="op">=</span> <span class="st">"glm"</span>,</span></span>
<span class="r-in"><span>                  stabilize <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  num.formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">~</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                     <span class="op">~</span> <span class="va">tx1</span>,</span></span>
<span class="r-in"><span>                                     <span class="op">~</span> <span class="va">tx2</span> <span class="op">+</span> <span class="va">tx1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Same as above but with fully saturated stabilization factors</span></span></span>
<span class="r-in"><span><span class="co">#(i.e., making the last entry in 'num.formula' tx2*tx2)</span></span></span>
<span class="r-in"><span><span class="va">W4</span> <span class="op">&lt;-</span> <span class="fu">weightitMSM</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">tx1</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span>,</span></span>
<span class="r-in"><span>                       <span class="va">tx2</span> <span class="op">~</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use1</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span>,</span></span>
<span class="r-in"><span>                       <span class="va">tx3</span> <span class="op">~</span> <span class="va">tx2</span> <span class="op">+</span> <span class="va">use2</span> <span class="op">+</span> <span class="va">tx1</span> <span class="op">+</span> <span class="va">use1</span> <span class="op">+</span> <span class="va">age</span> <span class="op">+</span> <span class="va">gender</span> <span class="op">+</span> <span class="va">use0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  data <span class="op">=</span> <span class="va">iptwExWide</span>,</span></span>
<span class="r-in"><span>                  method <span class="op">=</span> <span class="st">"glm"</span>,</span></span>
<span class="r-in"><span>                  stabilize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

