<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate Balancing Weights with Minimal Input Processing — weightit.fit • WeightIt</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generate Balancing Weights with Minimal Input Processing — weightit.fit" />
<meta property="og:description" content="weightit.fit() dispatches one of the weight estimation methods determined by method. It is an internal function called by weightit() and should probably not be used except in special cases. Unlike weightit(), weightit.fit() does not accept a formula and data frame interface and instead requires the covariates and treatment to be supplied as a numeric matrix and atomic vector, respectively. In this way, weightit.fit() is to weightit() what lm.fit() is to lm() - a thinner, slightly faster interface that performs minimal argument checking." />
<meta property="og:image" content="/logo.png" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">WeightIt</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.10.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/WeightIt.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ngreifer/WeightIt/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate Balancing Weights with Minimal Input Processing</h1>
    
    <div class="hidden name"><code>weightit.fit.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>weightit.fit()</code> dispatches one of the weight estimation methods determined by <code>method</code>. It is an internal function called by <code><a href='weightit.html'>weightit()</a></code> and should probably not be used except in special cases. Unlike <code><a href='weightit.html'>weightit()</a></code>, <code>weightit.fit()</code> does not accept a formula and data frame interface and instead requires the covariates and treatment to be supplied as a numeric matrix and atomic vector, respectively. In this way, <code>weightit.fit()</code> is to <code><a href='weightit.html'>weightit()</a></code> what <code><a href='https://rdrr.io/r/stats/lmfit.html'>lm.fit()</a></code> is to <code><a href='https://rdrr.io/r/stats/lm.html'>lm()</a></code> - a thinner, slightly faster interface that performs minimal argument checking.</p>
    </div>

    <pre class="usage"><span class='fu'>weightit.fit</span><span class='op'>(</span><span class='va'>covs</span>,
             <span class='va'>treat</span>,
             method <span class='op'>=</span> <span class='st'>"ps"</span>,
             s.weights <span class='op'>=</span> <span class='cn'>NULL</span>,
             by.factor <span class='op'>=</span> <span class='cn'>NULL</span>,
             estimand <span class='op'>=</span> <span class='st'>"ATE"</span>,
             focal <span class='op'>=</span> <span class='cn'>NULL</span>,
             stabilize <span class='op'>=</span> <span class='cn'>FALSE</span>,
             ps <span class='op'>=</span> <span class='cn'>NULL</span>,
             moments <span class='op'>=</span> <span class='cn'>NULL</span>,
             int <span class='op'>=</span> <span class='cn'>FALSE</span>,
             subclass <span class='op'>=</span> <span class='cn'>NULL</span>,
             is.MSM.method <span class='op'>=</span> <span class='cn'>FALSE</span>,
             missing <span class='op'>=</span> <span class='cn'>NULL</span>,
             verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
             include.obj <span class='op'>=</span> <span class='cn'>FALSE</span>,
             <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>covs</th>
      <td><p>a numeric matrix of covariates.</p></td>
    </tr>
    <tr>
      <th>treat</th>
      <td><p>a vector of treatment statuses.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>a string of length 1 containing the name of the method that will be used to estimate weights. See <code><a href='weightit.html'>weightit()</a></code> for allowable options. The default is <code>"ps"</code> for propensity score weighting.</p></td>
    </tr>
    <tr>
      <th>s.weights</th>
      <td><p>a numeric vector of sampling weights. See the individual pages for each method for information on whether sampling weights can be supplied.</p></td>
    </tr>
    <tr>
      <th>by.factor</th>
      <td><p>a factor variable for which weighting is to be done within levels. Corresponds to the <code>by</code> argument in <code><a href='weightit.html'>weightit()</a></code>.</p></td>
    </tr>
    <tr>
      <th>estimand</th>
      <td><p>the desired estimand. For binary and multi-category treatments, can be "ATE", "ATT", "ATC", and, for some methods, "ATO", "ATM", or "ATOS". The default for both is "ATE". This argument is ignored for continuous treatments. See the individual pages for each method for more information on which estimands are allowed with each method and what literature to read to interpret these estimands.</p></td>
    </tr>
    <tr>
      <th>stabilize</th>
      <td><p><code>logical</code>; whether or not to stabilize the weights. For the methods that involve estimating propensity scores, this involves multiplying each unit's weight by the proportion of units in their treatment group. Default is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>focal</th>
      <td><p>when multi-category treatments are used and ATT weights are requested, which group to consider the "treated" or focal group. This group will not be weighted, and the other groups will be weighted to be more like the focal group. Must be non-<code>NULL</code> if <code>estimand = "ATT"</code> or <code>"ATC"</code>.</p></td>
    </tr>
    <tr>
      <th>ps</th>
      <td><p>a vector of propensity scores. If specified, <code>method</code> will be ignored and set to <code>"ps"</code>.</p></td>
    </tr>
    <tr>
      <th>moments, int, subclass</th>
      <td><p>arguments to customize the weight estimation. See <code><a href='weightit.html'>weightit()</a></code> for details.</p></td>
    </tr>
    <tr>
      <th>is.MSM.method</th>
      <td><p>see <code><a href='weightitMSM.html'>weightitMSM()</a></code>. Typically can be ignored.</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p><code>character</code>; how missing data should be handled. The options depend on the <code>method</code> used. If <code>NULL</code>, <code>covs</code> covs will be checked for <code>NA</code> values, and if present, <code>missing</code> will be set to <code>"ind"</code>. If <code>""</code>, <code>covs</code> covs will not be checked for <code>NA</code> values; this can be faster when it is known there are none.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>whether to print additional information output by the fitting function.</p></td>
    </tr>
    <tr>
      <th>include.obj</th>
      <td><p>whether to include in the output any fit objects created in the process of estimating the weights. For example, with <code>method = "ps"</code>, the <code>glm</code> objects containing the propensity score model will be included. See the individual pages for each method for information on what object will be included if <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments for functions called by <code>weightit.fit()</code> that control aspects of fitting that are not covered by the above arguments.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>weightit.fit</code> object with the following elements:</p>
<dt>weights</dt><dd><p>The estimated weights, one for each unit.</p></dd>
  <dt>ps</dt><dd><p>The estimated or provided propensity scores. Estimated propensity scores are returned for binary treatments and only when <code>method</code> is <code>"ps"</code>, <code>"gbm"</code>, <code>"cbps"</code>, <code>"super"</code>, or <code>"bart"</code>.</p></dd>
  <dt>fit.obj</dt><dd><p>When <code>include.obj = TRUE</code>, the fit object.</p></dd>
  <dt>info</dt><dd><p>Additional information about the fitting. See the individual methods pages for what is included.</p></dd>

  The weightit.fit object does not have specialized print(), summary(), or plot() methods. It is simply a list containing the above components.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>weightit.fit()</code> is called by <code><a href='weightit.html'>weightit()</a></code> after the arguments to <code><a href='weightit.html'>weightit()</a></code> have been checked and processed. <code>weightit.fit()</code> dispatches the function used to actually estimate the weights, passing on the supplied arguments directly. <code>weightit.fit()</code> is not meant to be used by anyone other than experienced users who have a specific use case in mind. The returned object doesn't contain any information about the supplied arguments or details of the estimation method; all that is processed by <code>weightit</code>.</p>
<p>Less argument checking or processing occurs in <code>weightit.fit()</code> than does in <code><a href='weightit.html'>weightit()</a></code>, which means supplying incorrect arguments can result in errors, crashes, and invalid weights, and error and warning messages may not be helpful in diagnosing the problem. <code>weightit.fit()</code> does check to make sure weights were actually estimated, though.</p>
<p><code>weightit.fit()</code> may be most useful in speeding up simulation simulation studies that use <code><a href='weightit.html'>weightit()</a></code> because the covariates can be supplied as a numeric matrix, which is often how they are generated in simulations, without having to go through the potentially slow process of extracting the covariates and treatment from a formula and data frame. If the user is certain the arguments are valid (e.g., by ensuring the estimated weights are consistent with those estimated from <code><a href='weightit.html'>weightit()</a></code> with the same arguments), less time needs to be spent on processing the arguments. Also, the returned object is much smaller than a <code>weightit</code> object because the covariates are not returned alongside the weights.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='weightit.html'>weightit()</a></code>, which you should use for estimating weights unless you know better.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Noah Greifer</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='st'><a href='https://ngreifer.github.io/cobalt/'>"cobalt"</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"lalonde"</span>, package <span class='op'>=</span> <span class='st'>"cobalt"</span><span class='op'>)</span>

<span class='co'>#Balancing covariates between treatment groups (binary)</span>
<span class='va'>covs_mat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='va'>lalonde</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"age"</span>, <span class='st'>"educ"</span>, <span class='st'>"married"</span>,
                                <span class='st'>"nodegree"</span>, <span class='st'>"re74"</span>, <span class='st'>"re75"</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>wf1</span> <span class='op'>&lt;-</span> <span class='fu'>weightit.fit</span><span class='op'>(</span><span class='va'>covs_mat</span>, treat <span class='op'>=</span> <span class='va'>lalonde</span><span class='op'>$</span><span class='va'>treat</span>,
                    method <span class='op'>=</span> <span class='st'>"ps"</span>, estimand <span class='op'>=</span> <span class='st'>"ATT"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>wf1</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 4
#&gt;  $ weights: num [1:614] 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ ps     : num [1:614] 0.296 0.462 0.391 0.558 0.483 ...
#&gt;  $ fit.obj: NULL
#&gt;  $ info   : Named list()
#&gt;  - attr(*, "class")= chr "weightit.fit"</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


