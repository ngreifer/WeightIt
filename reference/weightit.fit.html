<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="weightit.fit() dispatches one of the weight estimation methods determined by method. It is an internal function called by weightit() and should probably not be used except in special cases. Unlike weightit(), weightit.fit() does not accept a formula and data frame interface and instead requires the covariates and treatment to be supplied as a numeric matrix and atomic vector, respectively. In this way, weightit.fit() is to weightit() what lm.fit() is to lm() - a thinner, slightly faster interface that performs minimal argument checking."><title>Generate Balancing Weights with Minimal Input Processing — weightit.fit • WeightIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Balancing Weights with Minimal Input Processing — weightit.fit"><meta property="og:description" content="weightit.fit() dispatches one of the weight estimation methods determined by method. It is an internal function called by weightit() and should probably not be used except in special cases. Unlike weightit(), weightit.fit() does not accept a formula and data frame interface and instead requires the covariates and treatment to be supplied as a numeric matrix and atomic vector, respectively. In this way, weightit.fit() is to weightit() what lm.fit() is to lm() - a thinner, slightly faster interface that performs minimal argument checking."><meta property="og:image" content="https://ngreifer.github.io/WeightIt/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">WeightIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.14.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/WeightIt.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Weighting</a>
    <a class="dropdown-item" href="../articles/installing-packages.html">Installing Supporting Packages</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ngreifer/WeightIt/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generate Balancing Weights with Minimal Input Processing</h1>
      
      <div class="d-none name"><code>weightit.fit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>weightit.fit()</code> dispatches one of the weight estimation methods determined by <code>method</code>. It is an internal function called by <code><a href="weightit.html">weightit()</a></code> and should probably not be used except in special cases. Unlike <code><a href="weightit.html">weightit()</a></code>, <code>weightit.fit()</code> does not accept a formula and data frame interface and instead requires the covariates and treatment to be supplied as a numeric matrix and atomic vector, respectively. In this way, <code>weightit.fit()</code> is to <code><a href="weightit.html">weightit()</a></code> what <code><a href="https://rdrr.io/r/stats/lmfit.html" class="external-link">lm.fit()</a></code> is to <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> - a thinner, slightly faster interface that performs minimal argument checking.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weightit.fit</span><span class="op">(</span><span class="va">covs</span>,</span>
<span>             <span class="va">treat</span>,</span>
<span>             method <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>             s.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             by.factor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             estimand <span class="op">=</span> <span class="st">"ATE"</span>,</span>
<span>             focal <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             stabilize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             ps <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             moments <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             int <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             subclass <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             is.MSM.method <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             missing <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>             verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             include.obj <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>             <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>covs</dt>
<dd><p>a numeric matrix of covariates.</p></dd>

  <dt>treat</dt>
<dd><p>a vector of treatment statuses.</p></dd>

  <dt>method</dt>
<dd><p>a string of length 1 containing the name of the method that will be used to estimate weights. See <code><a href="weightit.html">weightit()</a></code> for allowable options. The default is <code>"glm"</code> for propensity score weighting using a generalized linear model to estimate the propensity score.</p></dd>

  <dt>s.weights</dt>
<dd><p>a numeric vector of sampling weights. See the individual pages for each method for information on whether sampling weights can be supplied.</p></dd>

  <dt>by.factor</dt>
<dd><p>a factor variable for which weighting is to be done within levels. Corresponds to the <code>by</code> argument in <code><a href="weightit.html">weightit()</a></code>.</p></dd>

  <dt>estimand</dt>
<dd><p>the desired estimand. For binary and multi-category treatments, can be "ATE", "ATT", "ATC", and, for some methods, "ATO", "ATM", or "ATOS". The default for both is "ATE". This argument is ignored for continuous treatments. See the individual pages for each method for more information on which estimands are allowed with each method and what literature to read to interpret these estimands.</p></dd>

  <dt>stabilize</dt>
<dd><p><code>logical</code>; whether or not to stabilize the weights. For the methods that involve estimating propensity scores, this involves multiplying each unit's weight by the proportion of units in their treatment group. Default is <code>FALSE</code>.</p></dd>

  <dt>focal</dt>
<dd><p>when multi-category treatments are used and ATT weights are requested, which group to consider the "treated" or focal group. This group will not be weighted, and the other groups will be weighted to be more like the focal group. Must be non-<code>NULL</code> if <code>estimand = "ATT"</code> or <code>"ATC"</code>.</p></dd>

  <dt>ps</dt>
<dd><p>a vector of propensity scores. If specified, <code>method</code> will be ignored and set to <code>"glm"</code>.</p></dd>

  <dt>moments, int, subclass</dt>
<dd><p>arguments to customize the weight estimation. See <code><a href="weightit.html">weightit()</a></code> for details.</p></dd>

  <dt>is.MSM.method</dt>
<dd><p>see <code><a href="weightitMSM.html">weightitMSM()</a></code>. Typically can be ignored.</p></dd>

  <dt>missing</dt>
<dd><p><code>character</code>; how missing data should be handled. The options depend on the <code>method</code> used. If <code>NULL</code>, <code>covs</code> covs will be checked for <code>NA</code> values, and if present, <code>missing</code> will be set to <code>"ind"</code>. If <code>""</code>, <code>covs</code> covs will not be checked for <code>NA</code> values; this can be faster when it is known there are none.</p></dd>

  <dt>verbose</dt>
<dd><p>whether to print additional information output by the fitting function.</p></dd>

  <dt>include.obj</dt>
<dd><p>whether to include in the output any fit objects created in the process of estimating the weights. For example, with <code>method = "glm"</code>, the <code>glm</code> objects containing the propensity score model will be included. See the individual pages for each method for information on what object will be included if <code>TRUE</code>.</p></dd>

  <dt>...</dt>
<dd><p>other arguments for functions called by <code>weightit.fit()</code> that control aspects of fitting that are not covered by the above arguments.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>weightit.fit</code> object with the following elements:</p>
<dl><dt>weights</dt>
<dd><p>The estimated weights, one for each unit.</p></dd>

  <dt>ps</dt>
<dd><p>The estimated or provided propensity scores. Estimated propensity scores are returned for binary treatments and only when <code>method</code> is <code>"glm"</code>, <code>"gbm"</code>, <code>"cbps"</code>, <code>"super"</code>, or <code>"bart"</code>.</p></dd>

  <dt>fit.obj</dt>
<dd><p>When <code>include.obj = TRUE</code>, the fit object.</p></dd>

  <dt>info</dt>
<dd><p>Additional information about the fitting. See the individual methods pages for what is included.</p></dd>


</dl><p>The <code>weightit.fit</code> object does not have specialized <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, or <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> methods. It is simply a list containing the above components.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>weightit.fit()</code> is called by <code><a href="weightit.html">weightit()</a></code> after the arguments to <code><a href="weightit.html">weightit()</a></code> have been checked and processed. <code>weightit.fit()</code> dispatches the function used to actually estimate the weights, passing on the supplied arguments directly. <code>weightit.fit()</code> is not meant to be used by anyone other than experienced users who have a specific use case in mind. The returned object doesn't contain any information about the supplied arguments or details of the estimation method; all that is processed by <code>weightit</code>.</p>
<p>Less argument checking or processing occurs in <code>weightit.fit()</code> than does in <code><a href="weightit.html">weightit()</a></code>, which means supplying incorrect arguments can result in errors, crashes, and invalid weights, and error and warning messages may not be helpful in diagnosing the problem. <code>weightit.fit()</code> does check to make sure weights were actually estimated, though.</p>
<p><code>weightit.fit()</code> may be most useful in speeding up simulation simulation studies that use <code><a href="weightit.html">weightit()</a></code> because the covariates can be supplied as a numeric matrix, which is often how they are generated in simulations, without having to go through the potentially slow process of extracting the covariates and treatment from a formula and data frame. If the user is certain the arguments are valid (e.g., by ensuring the estimated weights are consistent with those estimated from <code><a href="weightit.html">weightit()</a></code> with the same arguments), less time needs to be spent on processing the arguments. Also, the returned object is much smaller than a <code>weightit</code> object because the covariates are not returned alongside the weights.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="weightit.html">weightit()</a></code>, which you should use for estimating weights unless you know better.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Noah Greifer</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ngreifer.github.io/cobalt/" class="external-link">"cobalt"</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="va">covs_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">lalonde</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"educ"</span>, <span class="st">"married"</span>,</span></span>
<span class="r-in"><span>                                <span class="st">"nodegree"</span>, <span class="st">"re74"</span>, <span class="st">"re75"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wf1</span> <span class="op">&lt;-</span> <span class="fu">weightit.fit</span><span class="op">(</span><span class="va">covs_mat</span>, treat <span class="op">=</span> <span class="va">lalonde</span><span class="op">$</span><span class="va">treat</span>,</span></span>
<span class="r-in"><span>                    method <span class="op">=</span> <span class="st">"glm"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">wf1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> List of 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ weights: num [1:614] 1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ ps     : num [1:614] 0.296 0.462 0.391 0.558 0.483 ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ fit.obj: NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  $ info   : Named list()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - attr(*, "class")= chr "weightit.fit"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

