<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Propensity Score Weighting Using SuperLearner — method_super • WeightIt</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Propensity Score Weighting Using SuperLearner — method_super"><meta name="description" content='This page explains the details of estimating weights from
SuperLearner-based propensity scores by setting method = "super" in the
call to weightit() or weightitMSM(). This method can be used with binary,
multi-category, and continuous treatments.
In general, this method relies on estimating propensity scores using the
SuperLearner algorithm for stacking predictions and then converting those
propensity scores into weights using a formula that depends on the desired
estimand. For binary and multi-category treatments, one or more binary
classification algorithms are used to estimate the propensity scores as the
predicted probability of being in each treatment given the covariates. For
continuous treatments, regression algorithms are used to estimate generalized
propensity scores as the conditional density of treatment given the
covariates. This method relies on SuperLearner::SuperLearner()
 from
the SuperLearner package.
Binary Treatments


For binary treatments, this method estimates the propensity scores using
SuperLearner::SuperLearner()
. The following estimands are allowed:
ATE, ATT, ATC, ATO, ATM, and ATOS. Weights can also be computed using
marginal mean weighting through stratification for the ATE, ATT, and ATC. See
get_w_from_ps() for details.



Multi-Category Treatments


For multi-category treatments, the propensity scores are estimated using
several calls to SuperLearner::SuperLearner()
, one for each treatment
group; the treatment probabilities are not normalized to sum to 1. The
following estimands are allowed: ATE, ATT, ATC, ATO, and ATM. The weights for
each estimand are computed using the standard formulas or those mentioned
above. Weights can also be computed using marginal mean weighting through
stratification for the ATE, ATT, and ATC. See get_w_from_ps() for details.



Continuous Treatments


For continuous treatments, the generalized propensity score is estimated
using SuperLearner::SuperLearner()
. In addition, kernel density
estimation can be used instead of assuming a normal density for the numerator
and denominator of the generalized propensity score by setting density = "kernel". Other arguments to density() can be specified to refine the
density estimation parameters. plot = TRUE can be specified to plot the
density for the numerator and denominator, which can be helpful in diagnosing
extreme weights.



Longitudinal Treatments


For longitudinal treatments, the weights are the product of the weights
estimated at each time point.



Sampling Weights


Sampling weights are supported through s.weights in all scenarios.



Missing Data


In the presence of missing data, the following value(s) for missing are
allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.







M-estimation


M-estimation is not supported.

'><meta property="og:description" content='This page explains the details of estimating weights from
SuperLearner-based propensity scores by setting method = "super" in the
call to weightit() or weightitMSM(). This method can be used with binary,
multi-category, and continuous treatments.
In general, this method relies on estimating propensity scores using the
SuperLearner algorithm for stacking predictions and then converting those
propensity scores into weights using a formula that depends on the desired
estimand. For binary and multi-category treatments, one or more binary
classification algorithms are used to estimate the propensity scores as the
predicted probability of being in each treatment given the covariates. For
continuous treatments, regression algorithms are used to estimate generalized
propensity scores as the conditional density of treatment given the
covariates. This method relies on SuperLearner::SuperLearner()
 from
the SuperLearner package.
Binary Treatments


For binary treatments, this method estimates the propensity scores using
SuperLearner::SuperLearner()
. The following estimands are allowed:
ATE, ATT, ATC, ATO, ATM, and ATOS. Weights can also be computed using
marginal mean weighting through stratification for the ATE, ATT, and ATC. See
get_w_from_ps() for details.



Multi-Category Treatments


For multi-category treatments, the propensity scores are estimated using
several calls to SuperLearner::SuperLearner()
, one for each treatment
group; the treatment probabilities are not normalized to sum to 1. The
following estimands are allowed: ATE, ATT, ATC, ATO, and ATM. The weights for
each estimand are computed using the standard formulas or those mentioned
above. Weights can also be computed using marginal mean weighting through
stratification for the ATE, ATT, and ATC. See get_w_from_ps() for details.



Continuous Treatments


For continuous treatments, the generalized propensity score is estimated
using SuperLearner::SuperLearner()
. In addition, kernel density
estimation can be used instead of assuming a normal density for the numerator
and denominator of the generalized propensity score by setting density = "kernel". Other arguments to density() can be specified to refine the
density estimation parameters. plot = TRUE can be specified to plot the
density for the numerator and denominator, which can be helpful in diagnosing
extreme weights.



Longitudinal Treatments


For longitudinal treatments, the weights are the product of the weights
estimated at each time point.



Sampling Weights


Sampling weights are supported through s.weights in all scenarios.



Missing Data


In the presence of missing data, the following value(s) for missing are
allowed:
"ind" (default)
First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is NA and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting weightit object will be the original covariates with the NAs.







M-estimation


M-estimation is not supported.

'><meta property="og:image" content="https://ngreifer.github.io/WeightIt/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WeightIt</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/WeightIt.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/estimating-effects.html">Estimating Effects After Weighting</a></li>
    <li><a class="dropdown-item" href="../articles/installing-packages.html">Installing Supporting Packages</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ngreifer/WeightIt/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Propensity Score Weighting Using SuperLearner</h1>
      <small class="dont-index">Source: <a href="https://github.com/ngreifer/WeightIt/blob/master/R/weightit2super.R" class="external-link"><code>R/weightit2super.R</code></a></small>
      <div class="d-none name"><code>method_super.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This page explains the details of estimating weights from
SuperLearner-based propensity scores by setting <code>method = "super"</code> in the
call to <code><a href="weightit.html">weightit()</a></code> or <code><a href="weightitMSM.html">weightitMSM()</a></code>. This method can be used with binary,
multi-category, and continuous treatments.</p>
<p>In general, this method relies on estimating propensity scores using the
SuperLearner algorithm for stacking predictions and then converting those
propensity scores into weights using a formula that depends on the desired
estimand. For binary and multi-category treatments, one or more binary
classification algorithms are used to estimate the propensity scores as the
predicted probability of being in each treatment given the covariates. For
continuous treatments, regression algorithms are used to estimate generalized
propensity scores as the conditional density of treatment given the
covariates. This method relies on <code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>
 from
the <a href="https://CRAN.R-project.org/package=SuperLearner" class="external-link"><span class="pkg">SuperLearner</span></a> package.</p><div class="section">
<h3 id="binary-treatments">Binary Treatments<a class="anchor" aria-label="anchor" href="#binary-treatments"></a></h3>


<p>For binary treatments, this method estimates the propensity scores using
<code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>
. The following estimands are allowed:
ATE, ATT, ATC, ATO, ATM, and ATOS. Weights can also be computed using
marginal mean weighting through stratification for the ATE, ATT, and ATC. See
<code><a href="get_w_from_ps.html">get_w_from_ps()</a></code> for details.</p>
</div>

<div class="section">
<h3 id="multi-category-treatments">Multi-Category Treatments<a class="anchor" aria-label="anchor" href="#multi-category-treatments"></a></h3>


<p>For multi-category treatments, the propensity scores are estimated using
several calls to <code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>
, one for each treatment
group; the treatment probabilities are not normalized to sum to 1. The
following estimands are allowed: ATE, ATT, ATC, ATO, and ATM. The weights for
each estimand are computed using the standard formulas or those mentioned
above. Weights can also be computed using marginal mean weighting through
stratification for the ATE, ATT, and ATC. See <code><a href="get_w_from_ps.html">get_w_from_ps()</a></code> for details.</p>
</div>

<div class="section">
<h3 id="continuous-treatments">Continuous Treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments"></a></h3>


<p>For continuous treatments, the generalized propensity score is estimated
using <code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>
. In addition, kernel density
estimation can be used instead of assuming a normal density for the numerator
and denominator of the generalized propensity score by setting <code>density = "kernel"</code>. Other arguments to <code><a href="https://rdrr.io/r/stats/density.html" class="external-link">density()</a></code> can be specified to refine the
density estimation parameters. <code>plot = TRUE</code> can be specified to plot the
density for the numerator and denominator, which can be helpful in diagnosing
extreme weights.</p>
</div>

<div class="section">
<h3 id="longitudinal-treatments">Longitudinal Treatments<a class="anchor" aria-label="anchor" href="#longitudinal-treatments"></a></h3>


<p>For longitudinal treatments, the weights are the product of the weights
estimated at each time point.</p>
</div>

<div class="section">
<h3 id="sampling-weights">Sampling Weights<a class="anchor" aria-label="anchor" href="#sampling-weights"></a></h3>


<p>Sampling weights are supported through <code>s.weights</code> in all scenarios.</p>
</div>

<div class="section">
<h3 id="missing-data">Missing Data<a class="anchor" aria-label="anchor" href="#missing-data"></a></h3>


<p>In the presence of missing data, the following value(s) for <code>missing</code> are
allowed:</p><dl><dt><code>"ind"</code> (default)</dt>
<dd><p>First, for each variable with missingness, a new missingness indicator variable is created which takes the value 1 if the original covariate is <code>NA</code> and 0 otherwise. The missingness indicators are added to the model formula as main effects. The missing values in the covariates are then replaced with the covariate medians (this value is arbitrary and does not affect estimation). The weight estimation then proceeds with this new formula and set of covariates. The covariates output in the resulting <code>weightit</code> object will be the original covariates with the <code>NA</code>s.</p></dd>


</dl></div>

<div class="section">
<h3 id="m-estimation">M-estimation<a class="anchor" aria-label="anchor" href="#m-estimation"></a></h3>


<p>M-estimation is not supported.</p>
</div>

    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>SuperLearner works by fitting several machine learning models to the
treatment and covariates and then taking a weighted combination of the
generated predicted values to use as the propensity scores, which are then
used to construct weights. The machine learning models used are supplied
using the <code>SL.library</code> argument; the more models are supplied, the higher the
chance of correctly modeling the propensity score. It is a good idea to
include parametric models, flexible and tree-based models, and regularized
models among the models selected. The predicted values are combined using the
method supplied in the <code>SL.method</code> argument (which is nonnegative least
squares by default). A benefit of SuperLearner is that, asymptotically, it is
guaranteed to perform as well as or better than the best-performing method
included in the library. Using Balance SuperLearner by setting <code>SL.method = "method.balance"</code> works by selecting the combination of predicted values that minimizes an imbalance measure.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Some methods formerly available in <span class="pkg">SuperLearner</span> are now in
<span class="pkg">SuperLearnerExtra</span>, which can be found on GitHub at
<a href="https://github.com/ecpolley/SuperLearnerExtra" class="external-link">https://github.com/ecpolley/SuperLearnerExtra</a>.</p>
<p>The <code>criterion</code> argument used to be called <code>stop.method</code>, which is its name
in <span class="pkg">twang</span>. <code>stop.method</code> still works for backward compatibility.
Additionally, the criteria formerly named as <code>es.mean</code>, <code>es.max</code>, and
<code>es.rms</code> have been renamed to <code>smd.mean</code>, <code>smd.max</code>, and <code>smd.rms</code>. The
former are used in <span class="pkg">twang</span> and will still work with <code><a href="weightit.html">weightit()</a></code> for
backward compatibility.</p>
<p>As of version 1.2.0, the default behavior for binary and multi-category
treatments is to stratify on the treatment when performing cross-validation
to ensure all treatment groups are represented in cross-validation. To
recover previous behavior, set <code>cvControl = list(stratifyCV = FALSE)</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="additional-arguments">Additional Arguments<a class="anchor" aria-label="anchor" href="#additional-arguments"></a></h2>



<dl><dt><code>discrete</code></dt>
<dd><p>if <code>TRUE</code>, uses discrete SuperLearner, which simply selects the best performing method. Default <code>FALSE</code>, which finds the optimal combination of predictions for the libraries using <code>SL.method</code>.</p></dd>


</dl><p>An argument to <code>SL.library</code> <strong>must</strong> be supplied. To see a list of
available entries, use <code><a href="https://rdrr.io/pkg/SuperLearner/man/listWrappers.html" class="external-link">SuperLearner::listWrappers()</a></code>
.</p>
<p>All arguments to <code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>
 can be passed through
<code><a href="weightit.html">weightit()</a></code> or <code><a href="weightitMSM.html">weightitMSM()</a></code>, with the following exceptions:</p><ul><li><p><code>obsWeights</code> is ignored because sampling weights are passed using <code>s.weights</code>.</p></li>
<li><p><code>method</code> in <code>SuperLearner()</code> is replaced with the argument <code>SL.method</code> in <code><a href="weightit.html">weightit()</a></code>.</p></li>
</ul><p>For binary and multi-category treatments, the following arguments may be supplied:</p><dl><dt><code>subclass</code></dt>
<dd><p><code>integer</code>; the number of subclasses to use for computing
weights using marginal mean weighting through stratification (MMWS). If <code>NULL</code>,
standard inverse probability weights (and their extensions) will be
computed; if a number greater than 1, subclasses will be formed and weights
will be computed based on subclass membership. See <code><a href="get_w_from_ps.html">get_w_from_ps()</a></code> for
details and references.</p></dd>


</dl><p>For continuous treatments, the following arguments may be supplied:</p><dl><dt><code>density</code></dt>
<dd><p>A function corresponding to the conditional density of the treatment. The standardized residuals of the treatment model will be fed through this function to produce the numerator and denominator of the generalized propensity score weights. If blank, <code><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm()</a></code> is used as recommended by Robins et al. (2000). This can also be supplied as a string containing the name of the function to be called. If the string contains underscores, the call will be split by the underscores and the latter splits will be supplied as arguments to the second argument and beyond. For example, if <code>density = "dt_2"</code> is specified, the density used will be that of a t-distribution with 2 degrees of freedom. Using a t-distribution can be useful when extreme outcome values are observed (Naimi et al., 2014).</p>
<p>Can also be <code>"kernel"</code> to use kernel density estimation, which calls <code><a href="https://rdrr.io/r/stats/density.html" class="external-link">density()</a></code> to estimate the numerator and denominator densities for the weights. (This used to be requested by setting <code>use.kernel = TRUE</code>, which is now deprecated.)</p></dd>

<dt><code>bw</code>, <code>adjust</code>, <code>kernel</code>, <code>n</code></dt>
<dd><p>If <code>density = "kernel"</code>, the arguments to <code><a href="https://rdrr.io/r/stats/density.html" class="external-link">density()</a></code>. The defaults are the same as those in <code><a href="https://rdrr.io/r/stats/density.html" class="external-link">density()</a></code> except that <code>n</code> is 10 times the number of units in the sample.</p></dd>

<dt><code>plot</code></dt>
<dd><p>If <code>density = "kernel"</code>, whether to plot the estimated densities.</p></dd>


</dl><div class="section">
<h3 id="balance-superlearner">Balance SuperLearner<a class="anchor" aria-label="anchor" href="#balance-superlearner"></a></h3>


<p>In addition to the methods allowed by <code>SuperLearner()</code>, one can specify
<code>SL.method = "method.balance"</code> to use "Balance SuperLearner" as described
by Pirracchio and Carone (2018), wherein covariate balance is used to
choose the optimal combination of the predictions from the methods
specified with <code>SL.library</code>. Coefficients are chosen (one for each
prediction method) so that the weights generated from the weighted
combination of the predictions optimize a balance criterion, which must be
set with the <code>criterion</code> argument, described below.</p><dl><dt><code>criterion</code></dt>
<dd><p>a string describing the balance criterion used to select the best weights. See <code><a href="https://ngreifer.github.io/cobalt/reference/bal.compute.html" class="external-link">cobalt::bal.compute()</a></code> for allowable options for each treatment type. For binary and multi-category treatments, the default is <code>"smd.mean"</code>, which minimizes the average absolute standard mean difference among the covariates between treatment groups. For continuous treatments, the default is <code>"p.mean"</code>, which minimizes the average absolute Pearson correlation between the treatment and covariates.</p></dd>


</dl><p>Note that this implementation differs from that of Pirracchio and Carone
(2018) in that here, balance is measured only on the terms included in the
model formula (i.e., and not their interactions unless specifically
included), and balance results from a sample weighted using the estimated
predicted values as propensity scores, not a sample matched using
propensity score matching on the predicted values. Binary and continuous
treatments are supported, but currently multi-category treatments are not.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="additional-outputs">Additional Outputs<a class="anchor" aria-label="anchor" href="#additional-outputs"></a></h2>


<dl><dt><code>info</code></dt>
<dd><p>For binary and continuous treatments, a list with two entries, <code>coef</code> and <code>cvRisk</code>. For multi-category treatments, a list of lists with these two entries, one for each treatment level.</p><dl><dt><code>coef</code></dt>
<dd><p>The coefficients in the linear combination of the predictions from each method in <code>SL.library</code>. Higher values indicate that the corresponding method plays a larger role in determining the resulting predicted value, and values close to zero indicate that the method plays little role in determining the predicted value. When <code>discrete = TRUE</code>, these correspond to the coefficients that would have been estimated had <code>discrete</code> been <code>FALSE</code>.</p></dd>

<dt><code>cvRisk</code></dt>
<dd><p>The cross-validation risk for each method in <code>SL.library</code>. Higher values indicate that the method has worse cross-validation accuracy. When <code>SL.method = "method.balance"</code>, the sample weighted balance statistic requested with <code>criterion</code>. Higher values indicate worse balance.</p></dd>


</dl></dd>

<dt><code>obj</code></dt>
<dd><p>When <code>include.obj = TRUE</code>, the SuperLearner fit(s) used to generate the predicted values. For binary and continuous treatments, the output of the call to <code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>
. For multi-category treatments, a list of outputs to calls to <code><a href="https://rdrr.io/pkg/SuperLearner/man/SuperLearner.html" class="external-link">SuperLearner::SuperLearner()</a></code>.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<div class="section">
<h3 id="binary-treatments-1">Binary treatments<a class="anchor" aria-label="anchor" href="#binary-treatments-1"></a></h3>


<p>Pirracchio, R., Petersen, M. L., &amp; van der Laan, M. (2015). Improving
Propensity Score Estimators’ Robustness to Model Misspecification Using Super
Learner. <em>American Journal of Epidemiology</em>, 181(2), 108–119.
<a href="https://doi.org/10.1093/aje/kwu253" class="external-link">doi:10.1093/aje/kwu253</a></p>
</div>

<div class="section">
<h3 id="continuous-treatments-1">Continuous treatments<a class="anchor" aria-label="anchor" href="#continuous-treatments-1"></a></h3>


<p>Kreif, N., Grieve, R., Díaz, I., &amp; Harrison, D. (2015). Evaluation of the
Effect of a Continuous Treatment: A Machine Learning Approach with an
Application to Treatment for Traumatic Brain Injury. <em>Health Economics</em>,
24(9), 1213–1228. <a href="https://doi.org/10.1002/hec.3189" class="external-link">doi:10.1002/hec.3189</a></p>
</div>

<div class="section">
<h3 id="balance-superlearner-sl-method-method-balance-">Balance SuperLearner (<code>SL.method = "method.balance"</code>)<a class="anchor" aria-label="anchor" href="#balance-superlearner-sl-method-method-balance-"></a></h3>


<p>Pirracchio, R., &amp; Carone, M. (2018). The Balance Super Learner: A robust
adaptation of the Super Learner to improve estimation of the average
treatment effect in the treated based on propensity score matching.
<em>Statistical Methods in Medical Research</em>, 27(8), 2504–2518.
<a href="https://doi.org/10.1177/0962280216682055" class="external-link">doi:10.1177/0962280216682055</a></p>
<p>See <code><a href="method_glm.html">method_glm</a></code> for additional references.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="weightit.html">weightit()</a></code>, <code><a href="weightitMSM.html">weightitMSM()</a></code>, <code><a href="get_w_from_ps.html">get_w_from_ps()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"cobalt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Note: for time, all exmaples use a small set of</span></span></span>
<span class="r-in"><span><span class="co">#      learners. Many more should be added if</span></span></span>
<span class="r-in"><span><span class="co">#      possible, including a variety of model</span></span></span>
<span class="r-in"><span><span class="co">#      types (e.g., parametric, flexible, tree-</span></span></span>
<span class="r-in"><span><span class="co">#      based, regularized, etc.)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W1</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"super"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span>,</span></span>
<span class="r-in"><span>                SL.library <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SL.glm"</span>, <span class="st">"SL.stepAIC"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"SL.glm.interaction"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: nnls</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "super" (propensity score weighting with SuperLearner)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.          ||                     1.   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 0.01 |---------------------------| 3.967</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              1     2     3     4     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated     1     1     1     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            404   226   224   111    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 2.052 2.135 2.277 2.691 3.967</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.000 0.000   0.000       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.962 0.718   0.386       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    223.01     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prop.score Distance   0.1346</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age         Contin.  -0.0574</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ        Contin.   0.0241</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      Binary  -0.0050</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     Binary   0.0219</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74        Contin.  -0.0295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    223.01     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Balancing covariates with respect to race (multi-category)</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W2</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">race</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"super"</span>, estimand <span class="op">=</span> <span class="st">"ATE"</span>,</span></span>
<span class="r-in"><span>                SL.library <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SL.glm"</span>, <span class="st">"SL.stepAIC"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"SL.glm.interaction"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "super" (propensity score weighting with SuperLearner)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 3-category (black, hispan, white)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          Min                                  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black  1.399 |-----------------|           12.866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan 1.98   |--------------------------| 18.542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white  1.066 |----|                         5.   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            203    166    155    153    152</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   black  7.234  7.849  9.856  11.77 12.866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             59     43     37     36     18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  hispan 14.316 14.355 14.397 14.509 18.542</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            285    205    177     94      3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   white  4.303  4.308  4.381  4.942      5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> black        0.620 0.385   0.131       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> hispan       0.417 0.340   0.089       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> white        0.394 0.324   0.072       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 243.    72.   299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   175.81  61.46 258.91</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance summary across all treatment pairs</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Max.Diff.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.       0.1814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.       0.0754</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary       0.0309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary       0.0132</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.       0.0332</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             black hispan  white</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 243.    72.   299.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   175.81  61.46 258.91</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Balancing covariates with respect to re75 (continuous)</span></span></span>
<span class="r-in"><span><span class="co"># assuming t(8) conditional density for treatment</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W3</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">re75</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"super"</span>, density <span class="op">=</span> <span class="st">"dt_8"</span>,</span></span>
<span class="r-in"><span>                SL.library <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SL.glm"</span>, <span class="st">"SL.ridge"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"SL.glm.interaction"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "super" (propensity score weighting with SuperLearner)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: continuous</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Min                                  Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all 0.044 |---------------------------| 22.616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        485   484    483    431    354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  all 9.587 16.21 18.466 20.328 22.616</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Coef of Var  MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> all       1.375 0.51   0.352       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted   212.62</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Corr.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age      Contin.   0.0342</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ     Contin.   0.0372</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married   Binary   0.0605</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree  Binary  -0.0627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74     Contin.   0.0405</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Total</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted 614.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted   212.62</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Balancing covariates between treatment groups (binary)</span></span></span>
<span class="r-in"><span><span class="co"># using balance SuperLearner to minimize the maximum</span></span></span>
<span class="r-in"><span><span class="co"># KS statistic</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">W4</span> <span class="op">&lt;-</span> <span class="fu"><a href="weightit.html">weightit</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span></span></span>
<span class="r-in"><span>                  <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span>, data <span class="op">=</span> <span class="va">lalonde</span>,</span></span>
<span class="r-in"><span>                method <span class="op">=</span> <span class="st">"super"</span>, estimand <span class="op">=</span> <span class="st">"ATT"</span>,</span></span>
<span class="r-in"><span>                SL.library <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SL.glm"</span>, <span class="st">"SL.stepAIC"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"SL.lda"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                SL.method <span class="op">=</span> <span class="st">"method.balance"</span>,</span></span>
<span class="r-in"><span>                criterion <span class="op">=</span> <span class="st">"ks.max"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A <span style="font-style: italic;">weightit</span> object</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - method: "super" (propensity score weighting with SuperLearner)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - number of obs.: 614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - sampling weights: none</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - treatment: 2-category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - estimand: ATT (focal: 1)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  - covariates: age, educ, married, nodegree, re74</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">W4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                   <span style="text-decoration: underline;">Summary of weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight ranges</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Min                                 Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated 1.                  ||              1.   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control 0.022 |---------------------------| 2.044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Units with the 5 most extreme weights by group</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             1     2   3     4     5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  treated    1     1   1     1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           410   226 224   111    84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  control 1.33 1.436 1.5 1.637 2.044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Weight statistics</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Coef of Var   MAD Entropy # Zeros</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> treated       0.000 0.000    0.00       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> control       0.823 0.701    0.33       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - <span style="font-style: italic;">Effective Sample Sizes</span>:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unweighted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Weighted    255.99     185</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">cobalt</span><span class="fu">::</span><span class="fu"><a href="https://ngreifer.github.io/cobalt/reference/bal.tab.html" class="external-link">bal.tab</a></span><span class="op">(</span><span class="va">W4</span>, stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m"</span>, <span class="st">"ks"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Balance Measures</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                Type Diff.Adj KS.Adj</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> prop.score Distance   0.0199 0.0944</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> age         Contin.   0.0459 0.2764</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> educ        Contin.  -0.0360 0.0601</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> married      Binary   0.0044 0.0044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> nodegree     Binary   0.0080 0.0080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> re74        Contin.  -0.0275 0.2839</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="text-decoration: underline;">Effective sample sizes</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Control Treated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Unadjusted  429.       185</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Adjusted    255.99     185</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Noah Greifer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

